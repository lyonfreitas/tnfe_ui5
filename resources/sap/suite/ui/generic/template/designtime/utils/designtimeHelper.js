sap.ui.define(["sap/base/util/extend","sap/base/util/deepExtend","sap/base/util/merge"],function(e,d,m){"use strict";var c={};var v=[];function l(){var p=[];function f(n){var N=n instanceof Node&&n;var C=n instanceof sap.ui.base.ManagedObject&&n||N&&N.id&&sap.ui.getCore().byId(N.id);if(N&&N.children){Array.prototype.forEach.apply(N.children,[f]);}if(!C||c[C.getId()]){return;}if(C instanceof sap.ui.core.mvc.XMLView){if(!v.includes(C)){v.push(C);}}else{var o={};c[C.getId()]=o;o.designTimePromise=C.getMetadata().loadDesignTime(C);p.push(o.designTimePromise);o.designTimePromise.then(function(D){o.designTime=D;});}C.findAggregatedObjects().forEach(f);}document.querySelectorAll(".sapUiXMLView").forEach(function(t){f(t);t.addEventListener('DOMNodeInserted',function(E){f(E.relatedNode);});});return Promise.all(p);}function g(C){var o=c[C.getId()]||{};var B=d({},o.designTime);var r=v.filter(function(V){return V.findAggregatedObjects(true).includes(C);});var V=r[0];if(V){o.pedigree=V.findAggregatedObjects(true,function(f){return f.findAggregatedObjects(true).includes(C);}).map(function(A){return{oAncestor:A,sAncestorId:A.getId(),sAggregation:Object.keys(A.getMetadata().getAllAggregations()).find(function(s){var f=A.getAggregation(s);if(Array.isArray(f)){return f.find(function(h){return h===C||h.findAggregatedObjects(true).includes(C);});}else{return f===C||f&&f.findAggregatedObjects&&f.findAggregatedObjects(true).includes(C);}})};}).filter(function(A){return c[A.sAncestorId]&&c[A.sAncestorId].designTime.aggregations&&c[A.sAncestorId].designTime.aggregations[A.sAggregation]&&c[A.sAncestorId].designTime.aggregations[A.sAggregation].propagateMetadata;}).reverse();B=o.pedigree.reduce(function(D,A){return m(D,c[A.sAncestorId].designTime.aggregations[A.sAggregation].propagateMetadata(C,A.oAncestor));},B);}return B;}function a(C,A){var r={actions:Object.create(null),aggregations:Object.create(null),properties:Object.create(null)};var B=e({},r,g(C));if(typeof(B.actions)==="object"){for(var s in B.actions){r.actions[s]=A&&A.actions&&A.actions.includes(s)?B.actions[s]:"not-adaptable";}}else{r.actions="not-adaptable";}for(var f in B.aggregations){r.aggregations[f]={actions:Object.create(null)};for(var s in B.aggregations[f].actions){r.aggregations[f].actions[s]=A&&A.aggregations&&A.aggregations[f]&&A.aggregations[f].actions&&A.aggregations[f].actions.includes(s)?B.aggregations[f].actions[s]:"not-adaptable";}}for(var p in C.getMetadata().getAllProperties()){r.properties[p]={ignore:!A||!A.properties||!A.properties.includes(p)};}return r;}function b(A){var D={aggregations:{content:{propagateMetadata:function(E){return a(E,A[E.getMetadata().getElementName()]);}}}};return v.reduce(function(D,V){return m(a(V,A[V.getMetadata().getElementName()]),D);},D);}return l().then(function(){return{getViewDesignTime:b};});});
