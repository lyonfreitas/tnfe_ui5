/*
 * ! SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.define(["sap/ui/base/Object","sap/base/util/merge","sap/base/util/extend","sap/base/util/isEmptyObject","sap/base/util/UriParameters","sap/ui/core/ComponentContainer","sap/ui/core/routing/HashChanger","sap/ui/core/routing/History","sap/ui/core/library","sap/suite/ui/generic/template/genericUtilities/FeError","sap/suite/ui/generic/template/genericUtilities/FeLogger","sap/suite/ui/generic/template/genericUtilities/oDataModelHelper","sap/suite/ui/generic/template/genericUtilities/ProcessObserver","sap/suite/ui/generic/template/genericUtilities/Queue","sap/suite/ui/generic/template/genericUtilities/testableHelper","sap/suite/ui/generic/template/lib/CRUDHelper","sap/suite/ui/generic/template/lib/navigation/routingHelper","sap/suite/ui/generic/template/lib/navigation/startupParameterHelper","sap/suite/ui/generic/template/lib/TemplateComponent"],function(B,m,e,a,U,C,H,b,c,F,d,D,P,Q,t,f,r,s,T){"use strict";var g="lib.navigation.NavigationController";var l=new d(g).getLogger();var h=c.routing.HistoryDirection;var o=b.getInstance();function k(i){i=i||o.getDirection();return i===h.Backwards;}var n=r.getCrossAppNavService();var A="sap-iapp-state--create";var p="sap-iapp-state--history";function q(R){var i=R.substring(R.length-5,R.length);if(i==="query"){return R.substring(0,R.length-5);}return R;}function N(i){if(i.indexOf("/")===0){return i;}return"/"+i;}function u(j){var z="";var R="";var E=Object.keys(j).sort();E.forEach(function(G){var V=j[G];if(Array.isArray(V)){var I=V.sort();for(var i=0;i<I.length;i++){var J=I[i];R=R+z+G+"="+J;z="&";}}else{R=R+z+G+"="+V;z="&";}});return R;}function v(i,j){i=i||"";var z=(i.charAt(i.length-1)==="/")?"?":"/?";return i+(j?z+j:"");}function w(z,E){var S=[];var G=n.createEmptyAppState(z.oAppComponent,true);var I=G.getKey();var J;var K;var M;var L;var O;var R,V;var W;var X;var Y;var Z;var $=Promise.resolve();var _=(new Q()).start();function a1(i,j){var $2=i.iHashChangeCount+1;V={iHashChangeCount:$2,backTarget:i.iHashChangeCount,componentsDisplayed:Object.create(null),LeaveByBack:true,backSteps:1};if(j){W.followUpNeeded={mode:j.mode,displayMode:j.displayMode,identity:{treeNode:z.mRoutingTree[j.route],keys:j.keys,appStates:j.appStates}};P1(null);}}function b1(i){X=false;z.oBusyHelper.setBusyReason("HashChange",true,undefined,undefined,true);Y={};K=k();if(K){z.oBusyHelper.getUnbusy().then(function(){K=false;});W={mode:-1};if(S.length){var j=S.pop();L=j.isInitialNavigation;M=j.myIntentPromise;O=j.previousHashes;O.push(j.currentHash);a1(j.currentHash,j.serializedBackOption);return;}}else{L=!n||n.isInitialNavigation();}z.myIntentPromise=sap.ushell&&sap.ushell.renderers&&sap.ushell.Container&&new Promise(function(a3){sap.ushell.Container.getServiceAsync("AppLifeCycle").then(function(b3){var c3=b3.getCurrentApplication();var d3=function(){c3=c3||b3.getCurrentApplication();var e3=c3.getIntent();a3(e3);};if(c3){d3();}else{b3.attachAppLoaded(null,d3);}});});M=z.myIntentPromise?Promise.all([z.myIntentPromise,sap.ushell.Container.getServiceAsync("URLParsing")]).then(function(a3){var b3=e({},a3[0]);var c3=a3[1];b3.appSpecificRoute="&/";var d3=c3.constructShellHash(b3);return"#"+d3;}):Promise.resolve("");g1();if(i){var $2=!K&&!E.oHashChanger.getHash()&&z.oAppComponent.getComponentData();var _2=$2&&$2.startupParameters;if(_2){s.parametersToNavigation(z,_2).then(function(a3){if(a3){R={treeNode:z.mRoutingTree.root,keys:[],appStates:Object.create(null)};t2(a3);}E.initialize(!!a3);});}else{E.initialize();}}}var c1=Promise.resolve();var d1=Promise.resolve();var e1=new P();function f1(){var i=k();if(!i){var j=G.getData();S.push({isInitialNavigation:L,myIntentPromise:M,currentHash:V,previousHashes:O,serializedBackOption:j.serializedBackOption});}M=null;V=null;O=null;R=null;Z=null;Y=null;}function g1(){V={iHashChangeCount:0,backTarget:0,componentsDisplayed:Object.create(null)};R=null;O=[];if(!K){W=null;}Z=null;}function h1(){F2(z.mRoutingTree.root.sRouteName);return z.mRoutingTree.root.componentCreated;}function i1(){return E.oAppComponent.getManifestEntry("sap.app").title;}function j1(){return E.oAppComponent.getProperty('draftDiscardConfirmationSettings').enabled;}function k1(){var i=sap.ushell&&sap.ushell.Container;return i&&i.getServiceAsync("URLParsing");}function l1(i,j,$2){if(!i){return Promise.resolve();}var _2=i&&z.componentRegistry[i];var a3=[];var b3=_2&&_2.methods.getUrlParameterInfo;if(b3){a3.push(_2.viewRegistered.then(function(){var c3=j&&N(j);return b3(c3,V.componentsDisplayed[_2.route]===1).then(function(d3){e($2,d3);});}));}a3.push(_2.oStatePreserverPromise.then(function(c3){var d3=j&&N(j);return c3.getUrlParameterInfo(d3,V.componentsDisplayed[_2.route]===1).then(function(e3){e($2,e3);});}));return Promise.all(a3);}function m1(i){var j=i.treeNode.componentId;var $2=i.treeNode.getPath(2,i.keys);var _2=i.appStates;return l1(j,$2,_2);}function n1(i,j){if(i.treeNode===j.treeNode){j.appStates=i.appStates;return Promise.resolve();}j.appStates=Object.create(null);if(j.treeNode.fCLLevel===0||j.treeNode.fCLLevel===3){return m1(j);}return z.oFlexibleColumnLayoutHandler.getAppStatesPromiseForNavigation(R,j);}function o1(i,j,$2){var _2=z.mRoutingTree[i];return l1(_2.componentId,$2,j);}function p1(i,j){var $2;if(!i&&j instanceof T){var _2=j&&z.componentRegistry[j.getId()];var a3=_2&&_2.methods.getTitle;$2=a3&&a3();}else if(!i&&j&&j.title){$2=j.title;}$2=$2||i1();z.oShellServicePromise.then(function(b3){b3.setTitle($2);}).catch(function(){l.warning("No ShellService available");});}function q1(i){var j=[z.oPagesDataLoadedObserver.getProcessFinished(true)];var $2=null;var _2=V.iHashChangeCount;delete R.componentsDisplayed;var a3=-1;for(var b3 in z.componentRegistry){var c3=z.componentRegistry[b3];var d3=c3.oControllerUtils&&c3.oControllerUtils.oServices.oTemplateCapabilities.oMessageButtonHelper;var e3=V.componentsDisplayed[c3.route]===1;var f3=c3.utils.getTemplatePrivateModel();f3.setProperty("/generic/isActive",e3);if(e3){j.push(c3.oViewRenderedPromise);if(c3.viewLevel>a3){a3=c3.viewLevel;$2=c3.oComponent;}}else{c3.utils.suspendBinding();}if(d3){d3.setEnabled(e3);}}var g3=a(V.componentsDisplayed)||(z.oFlexibleColumnLayoutHandler&&z.oFlexibleColumnLayoutHandler.isAppTitlePrefered());p1(g3,i||$2);Promise.all(j).then(function(){if(_2===V.iHashChangeCount&&a(Y)){z.oAppComponent.firePageDataLoaded();}});}var r1=q1.bind(null,null);t.testable(function(i){R=i;O.push(V);V={backTarget:0,componentsDisplayed:Object.create(null)};},"setCurrentIdentity");t.testable(function(i){I=i;},"setHistoryKey");function s1(){return R;}function t1(j,$2){if(Array.isArray(j)&&j.length<2){j=j[0];}if(Array.isArray($2)&&$2.length<2){$2=$2[0];}if(Array.isArray(j)){if(Array.isArray($2)){if(j.length===$2.length){j=j.sort();$2=$2.sort();return j.every(function(_2,i){return _2===$2[i];});}return false;}return false;}return $2===j;}function u1(i,j){if(!i||i.treeNode!==j.treeNode){return false;}for(var $2=j.treeNode;$2.level>0;$2=z.mRoutingTree[$2.parentRoute]){if(!$2.noKey&&j.keys[$2.level]!==i.keys[$2.level]){return false;}}if(a(i.appStates)){return a(j.appStates);}var _2=e(Object.create(null),j.appStates,i.appStates);for(var a3 in _2){var b3=(a3===p)?I:j.appStates[a3];if(!t1(b3,i.appStates[a3])){return false;}}return true;}function v1(i){return u1(R,i);}function w1(i,j,$2){var _2=Object.create(null);for(var a3=i;a3.level>0;a3=z.mRoutingTree[a3.parentRoute]){if(!a3.noKey){_2["keys"+a3.level]=j[a3.level];}}var b3=!a($2);var c3=i.sRouteName+(b3?"query":"");if(b3){_2["query"]=$2;}return{route:c3,parameters:_2};}function x1(i){var j=w1(W.identity.treeNode,W.identity.keys,W.identity.appStates);if(!z.ghostapp){E.oRouter.navTo(j.route,j.parameters,i);}}function y1(i){if(!i||!W.identity){return;}var j=function(_2,a3,b3){b3=a3?a3.getId():b3;var c3=z.componentRegistry[b3];(c3.methods.presetDisplayMode||Function.prototype)(i,_2);};for(var $2=W.identity.treeNode;$2;$2=$2.parentRoute&&z.mRoutingTree[$2.parentRoute]){if($2.componentId){j(V.componentsDisplayed[$2.sRouteName]===1,null,$2.componentId);}else{$2.componentCreated.then(j.bind(null,false));}if($2.fCLLevel===0||$2.fCLLevel===3){break;}}}function z1(j){if(!W||W.identity){return Promise.resolve(j);}var $2=V;for(var i=0;i>j;i--){if($2.backTarget===0){return Promise.resolve(j);}$2=O[$2.backTarget];}W.mode=j;while(v1($2.identity)){W.mode--;if($2.backTarget===0){return Promise.resolve(W.mode);}$2=O[$2.backTarget];}if($2.identity.treeNode.level===0){W.identity=$2.identity;return Promise.resolve(W.mode);}return D2($2.identity).then(function(_2){if(!_2){W.identity=$2.identity;return Promise.resolve(W.mode);}if(v1(_2.identity)){W.mode--;return z1(W.mode);}W.identity=_2.identity;W.followUpNeeded=true;return Promise.resolve(W.mode);});}function A1(i){var j;if(i){if(i.identity){i.identity.appStates[p]=I;}if(W){if(i.identity){W={identity:i.identity,followUpNeeded:true,mode:W?W.mode:0};y1(i.displayMode);}return;}if(i.identity&&v1(i.identity)){return;}j=i.mode;if(j===1&&i.identity&&V.backTarget&&u1(O[V.backTarget],i.identity)){j=-1;}W={identity:i.identity,mode:j};y1(i.displayMode);}else{j=1;}W.followUpNeeded=W.identity&&j<0;if(W.identity||(j===-1&&V.backTarget)){z.oBusyHelper.setBusyReason("HashChange",!z.ghostapp,undefined,undefined,true);_.stop();}else{W=null;}if(j>=0){x1(j===1);}else if(!z.ghostapp){return z1(j).then(function($2){window.history.go($2);});}}function B1(i,j){i.text=((i.headerTitle!==j)&&j)||"";if(Z&&Z.linkInfos.length>i.level){Z.adjustNavigationHierarchy();}}function C1(i,j){var $2=Object.create(null);if(z.oFlexibleColumnLayoutHandler){z.oFlexibleColumnLayoutHandler.adaptBreadCrumbUrlParameters($2,i);}var _2={treeNode:i};var a3={treeNode:i,keys:R.keys.slice(0,i.level+1),appStates:$2};var b3;var c3=m1(a3).then(function(){var d3=w1(i,R.keys,$2);b3=E.oRouter.getURL(d3.route,d3.parameters);$2[p]=I;d3=w1(i,R.keys,$2);_2.fullLink=E.oRouter.getURL(d3.route,d3.parameters);});j.push(c3);_2.navigate=function(d3,e3){if(z.oFlexibleColumnLayoutHandler&&!e3){var f3;for(var g3=O[V.backTarget];g3.backTarget>0&&!f3;g3=O[g3.backTarget]){if(g3.identity.treeNode===i){f3=g3.identity;}}z.oFlexibleColumnLayoutHandler.adaptPreferredLayout($2,i,f3);}z.oBusyHelper.setBusy(c3.then(function(){return T1(a3,false,d3);}),undefined,undefined,true);};_2.adaptBreadCrumbLink=function(d3){c3.then(function(){var e3=H.getInstance();var f3=e3.hrefForAppSpecificHash?e3.hrefForAppSpecificHash(b3):"#/"+b3;d3.setHref(f3);});};return _2;}function D1(i,j){var $2={title:j.treeNode.headerTitle||"",icon:j.treeNode.titleIconUrl||"",subtitle:j.treeNode.text,intent:i+j.fullLink};return $2;}function E1(){var j=[];var $2=[M];var _2=z.oFlexibleColumnLayoutHandler&&z.oFlexibleColumnLayoutHandler.hasNavigationMenuSelfLink(R);for(var a3=_2?R.treeNode:z.mRoutingTree[R.treeNode.parentRoute];a3;a3=z.mRoutingTree[a3.parentRoute]){var b3=C1(a3,$2);j[a3.level]=b3;}var c3=Promise.all($2);var d3=function(){z.oShellServicePromise.then(function(e3){e3.setHierarchy([]);c3.then(function(f3){var g3=f3[0];var h3=[];for(var i=j.length-1;i>=0;i--){h3.push(D1(g3,j[i]));}e3.setHierarchy(h3);});}).catch(function(){l.warning("No ShellService available");});};Z={linkInfos:j,adjustNavigationHierarchy:d3};d3();}function F1(){return Z.linkInfos;}function G1(i,j){var $2=Object.create(null);var _2=q(i);$2.treeNode=z.mRoutingTree[_2];$2.appStates=j["?query"]||Object.create(null);$2.keys=[""];for(var a3=$2.treeNode;a3.level>0;a3=z.mRoutingTree[a3.parentRoute]){$2.keys[a3.level]=a3.noKey?"":j["keys"+a3.level];}return $2;}function H1(i){var j=R;if(W&&W.identity&&!W.followUpNeeded){R=W.identity;}else{var $2=i.getParameter("config");R=G1($2.name,i.getParameter("arguments"));}R.previousIdentity=j;R.componentsDisplayed=Object.create(null);R.componentsDisplayed[R.treeNode.sRouteName]=1;E1();}function I1(i,j){var $2=e1.getProcessFinished(true).then(function(){var _2={identity:{treeNode:R.treeNode,keys:R.keys,appStates:e(Object.create(null),R.appStates)},mode:1};if(Array.isArray(j)&&j.length<2){j=j[0];}if(j){_2.identity.appStates[i]=j;}else{delete _2.identity.appStates[i];}A1(_2);});z.oBusyHelper.setBusy($2,undefined,undefined,true);return $2;}var J1;function K1(i,j,$2,_2,a3,b3){var c3=i.then(function(d3){d3.appStates=b3||Object.create(null);var e3;if(d3.treeNode.fCLLevel===0||d3.treeNode.fCLLevel===3){e3=m1(d3);}else{e3=z.oFlexibleColumnLayoutHandler.getAppStatesPromiseForNavigation(R,d3);}if(!j&&a3&&a3.bIsCreate&&a3.bIsDraft&&!a3.bIsDraftModified){J1={index:O.length,path:_2.getPath(),identity:d3,displayMode:d2()};}return e3.then(function(){return T1(d3,j,$2);});});z.oBusyHelper.setBusy(c3,undefined,undefined,true);return c3;}function L1(i,j,$2,_2,a3){if(!i||(Array.isArray(i)&&i.length===0)){return m2(j);}var b3=Array.isArray(i)?i:[i];var c3=(b3.length===1&&(!R||R.treeNode.level>0))&&D.analyseContext(b3[0]);var d3=c3&&z.mEntityTree[c3.entitySet];var e3=d3&&(d3.level===1?["",c3.key]:z.oApplicationProxy.getIdentityKeyForContext(b3[0]));var f3=e3?Promise.resolve({treeNode:d3,keys:e3}):new Promise(function(g3,h3){var i3=0,j3;var k3=function(){if(i3==b3.length){g3(j3);}else{var l3=b3[i3];var m3=Y1(j3,l3,true,true);m3.then(function(n3){i3++;j3=n3;k3();});}};k3();});return K1(f3,j,$2,b3[0],_2,a3);}function M1(i,j,$2,_2){var a3=Y1(null,i,true,true);return K1(a3,j,$2,i,_2).then(Function.prototype,Function.prototype);}function N1(j){if(!J1||J1.path!==j.getPath()){return null;}var $2;var _2=function(f3,i){return f3!==$2.identity.keys[i];};for(var i=J1.index+1;i<O.length;i++){$2=O[i];if(!$2.identity.treeNode||$2.identity.treeNode.level<J1.identity.treeNode.level||J1.identity.keys.some(_2)){return null;}}var a3=0;for(var b3=V;b3.iHashChangeCount!==J1.index;b3=O[b3.backTarget]){if(b3.iHashChangeCount<J1.index){return null;}a3--;}var c3=O[J1.index].identity;var d3={treeNode:c3.treeNode,keys:c3.keys,appStates:Object.create(null)};var e3={identity:d3,mode:a3,displayMode:J1.displayMode};if(c3.treeNode.fCLLevel===0||c3.treeNode.fCLLevel===3){e(d3.appStates,c3.appStates);return Promise.resolve(e3);}return z.oFlexibleColumnLayoutHandler.getSpecialDraftCancelPromise(R,c3,d3.appStates).then(function(){return e3;});}function O1(i){var j=N1(i);return j&&j.then(function($2){return A1.bind(null,$2);});}function P1(i){var j=G.getData();if(!j){if(!i){return;}j={};}j.serializedBackOption=i&&{mode:i.mode,displayMode:i.displayMode,route:i.identity.treeNode.sRouteName,keys:i.identity.keys,appStates:i.identity.appStates};G.setData(j);G.save();}function Q1(i,j,$2){var _2=D.analyseContext(i);var a3={keys:["",_2.key],appStates:Object.create(null)};var b3=_.makeQueuable(T1.bind(null,a3,true,j));if(R.treeNode.level===1){a3.treeNode=R.treeNode;e(a3.appStates,R.appStates);return Promise.resolve(b3);}if($2){$2.keys.forEach(function(d3){if(d3){a3.keys.push(d3);}});a3.treeNode=$2.treeNode;}if(a3.treeNode===R.treeNode){e(a3.appStates,R.appStates);return Promise.resolve(b3);}var c3=z.oFlexibleColumnLayoutHandler.getAppStatesPromiseForNavigation(R,a3);return c3.then(function(){return b3;});}function R1(i,j){if((i&&i.treeNode)!==j.treeNode){return Promise.resolve(false);}if(z.oFlexibleColumnLayoutHandler&&!z.oFlexibleColumnLayoutHandler.areIdentitiesLayoutEquivalent(i,j)){return Promise.resolve(false);}var $2=true;var _2=i.treeNode.sRouteName;for(var a3=i.treeNode;a3.level>0;a3=z.mRoutingTree[a3.parentRoute]){var b3=a3.noKey||i.keys[a3.level]===j.keys[a3.level];if(!b3&&a3.noOData){return Promise.resolve(false);}$2=$2&&b3;if(a3.noOData){_2=a3.parentRoute;}}if($2){return Promise.resolve(true);}var c3=z.mRoutingTree[_2];var d3=i.keys.slice(0,c3.level+1);var e3=j.keys.slice(0,c3.level+1);var f3=c3.getPath(2,d3);var g3=c3.getPath(2,e3);return z.oApplicationProxy.areTwoKnownPathesIdentical(f3,g3,c3.level===1,i,j);}function S1(i){var j=O[V.backTarget];var $2=-1;if(j&&(i.level===0||(z.oFlexibleColumnLayoutHandler&&i.fCLLevel===0))){for(;j.backTarget>0&&j.identity.treeNode&&j.identity.treeNode.level>i.level;$2--){j=O[j.backTarget];}}return j&&{candidateHash:j,candidateCount:$2};}function T1(i,j,$2){var _2=S1(i.treeNode);var a3=R1(_2&&_2.candidateHash.identity,i);var b3=a3.then(function(c3){var d3=c3?_2.candidateCount:(0+!!j);var e3={identity:i,mode:d3,displayMode:$2};A1(e3);});z.oBusyHelper.setBusy(b3,undefined,undefined,true);return b3;}function U1(i){if(K){return m2(true);}var j=V1();t2({title:j.dataLoadFailedTitle,text:j.dataLoadFailedText,description:"",viewLevel:i.fCLLevel});return Promise.resolve();}function V1(){return{dataLoadFailedTitle:z.getText("ST_ERROR"),dataLoadFailedText:z.getText("ST_GENERIC_ERROR_LOAD_DATA_TEXT")};}function W1(i,j,$2,_2){if(!j){return{treeNode:z.mRoutingTree.root,key:""};}var a3=D.analyseContext(j);var b3=(i.level&&i.entitySet===a3.entitySet)?i:i.children.indexOf(a3.entitySet)>=0&&z.mEntityTree[a3.entitySet];if(b3){return{treeNode:b3,key:a3.key};}if($2){var c3=z.oAppComponent.getModel();var d3=c3.getMetaModel();var e3=d3.getODataEntitySet(a3.entitySet);var f3=d3.getODataEntityType(e3.entityType);var g3;var h3=i.children.some(function(j3){b3=z.mEntityTree[j3];g3=b3.navigationProperty;if(!g3){return false;}var k3=d3.getODataAssociationEnd(f3,g3);return!!k3&&k3.multiplicity.endsWith("1");});if(h3){return{treeNode:b3,navigationProperty:g3};}}if(_2&&i.level>0){var i3=z.mRoutingTree[i.parentRoute];return W1(i3,j,$2,true);}}function X1(i,j,$2,_2){if(_2.navigationProperty){return new Promise(function(b3,c3){var d3=$2.getModel();d3.createBindingContext(_2.navigationProperty,$2,null,function(e3){var f3=e3&&X1(i,j,e3,{treeNode:_2.treeNode,key:D.analyseContext(e3).key});if(f3){f3.then(b3,c3);}else{c3();}});});}var a3=j.slice(0,_2.treeNode.level);a3.push(_2.key);return Promise.resolve({treeNode:_2.treeNode,keys:a3});}function Y1(i,j,$2,_2){var a3=(i&&i.treeNode)||(R&&R.treeNode)||z.mRoutingTree.root;var b3=(i&&i.keys)||(R&&R.keys)||[""];var c3=W1(a3,j,$2,_2);return c3?X1(a3,b3,j,c3):Promise.reject();}function Z1(i,j,$2){var _2={treeNode:i,keys:$2||R.keys.slice(0,i.level+1),appStates:j};if(i.fCLLevel===0||i.fCLLevel===3){return m1(_2);}return z.oFlexibleColumnLayoutHandler.getAppStatesPromiseForNavigation(R,_2);}function $1(i){var j=Y1({treeNode:z.mRoutingTree.root},i,false,true);var $2=j.then(function(_2){_2.appStates=Object.create(null);var a3;if(_2.treeNode===R.treeNode){Object.assign(_2.appStates,R.appStates);a3={identity:_2,mode:1,displayMode:1};A1(a3);return null;}var b3=Z1(_2.treeNode,_2.appStates);return b3.then(T1.bind(null,_2,true,1));});z.oBusyHelper.setBusy($2,undefined,undefined,true);return $2;}function _1(i){var j;var $2=0;for(j=V;j.backTarget>0&&(!j.identity||!j.identity.treeNode||j.identity.treeNode.level>i);$2++){j=O[j.backTarget];}if(!L&&($2===0||!j.identity.treeNode||j.identity.treeNode.level>i)){window.history.go(-$2-1);return Promise.resolve();}var _2=-$2||1;var a3=y2(i);var b3={treeNode:a3,keys:R.keys.slice(0,a3.level+1),appStates:Object.create(null)};var c3=Z1(b3.treeNode,b3.appStates).then(function(){if(_2<0&&(b3.treeNode.fCLLevel===1||b3.treeNode.fCLLevel===2)&&j.identity.treeNode===b3.treeNode){for(;j.backTarget>0&&!z.oFlexibleColumnLayoutHandler.areIdentitiesLayoutEquivalent(j.identity,b3);_2--){j=O[j.backTarget];if(j.identity.treeNode!==b3.treeNode){break;}}}var d3={identity:b3,mode:_2,displayMode:b3.treeNode.isDraft?6:1};A1(d3);});z.oBusyHelper.setBusy(c3,undefined,undefined,true);return c3;}var a2;function b2(i,j,$2,_2){var a3=z.mEntityTree[i];var b3=z.componentRegistry[a3.componentId];var c3;if(j){var d3=n.createEmptyAppState(z.oAppComponent);d3.setData(j);d3.save();c3=d3.getKey();}var e3=R?R.keys.slice(0,a3.level):[""];e3.push("-");_2=_2||Object.create(null);var f3=Z1(a3,_2,e3);var g3=f3.then(function(){if(c3){_2[A]=c3;}var h3={treeNode:a3,keys:e3,appStates:_2};a2=$2;if(v1(h3)){var i3={componentsDisplayed:V.componentsDisplayed,isNonDraftCreate:true};return A2("-",i3,b3.oComponent);}else{var j3=!R||!!(b3&&b3.nonDraftCreateContext);return T1(h3,j3,4);}});z.oBusyHelper.setBusy(g3,undefined,undefined,true);return g3;}function c2(i){var j=Y1(null,i,false,false);var $2=j.then(function(_2){_2.appStates=Object.create(null);e(_2.appStates,R.appStates);delete _2.appStates[A];var a3={identity:_2,mode:1};A1(a3);});z.oBusyHelper.setBusy($2,undefined,undefined,true);return $2;}function d2(){var i=z.componentRegistry[R.treeNode.componentId];var j=i.utils.getTemplatePrivateModel();var $2=j.getProperty("/objectPage/displayMode")||0;return $2;}function e2(i,j,$2,_2,a3){var b3=R.keys.slice(0,i.level);b3.push(j?$2:"");var c3=Object.create(null);var d3=Z1(i,c3,b3);var e3=d3.then(function(){var f3={treeNode:i,keys:b3,appStates:c3};return T1(f3,_2,a3);});z.oBusyHelper.setBusy(e3,undefined,undefined,true);return e3;}function f2($2,_2,a3,b3,c3,d3){var e3;var f3=true;for(var i=0;i<$2.children.length&&!e3;i++){var g3=$2.children[i];var h3=z.mEntityTree[g3];if(h3[$2.level?"navigationProperty":"sRouteName"]===_2){e3=h3.sRouteName;f3=!h3.noKey;}}var i3=!e3&&a3&&$2.embeddedComponents[a3];if(i3){for(var j=0;j<i3.pages.length&&!e3;j++){var j3=i3.pages[j];if(j3.navigationProperty===_2){e3=$2.sRouteName+"/"+a3+"/"+_2;f3=!(j3.routingSpec&&j3.routingSpec.noKey);}}}if(e3){var k3=z.mRoutingTree[e3];if(!d3){d3=d2();}return e2(k3,f3,b3,c3,d3);}return Promise.reject();}function g2(i,j,$2,_2){var a3=Y1({treeNode:i},j,true,false);var b3=a3.then(function(c3){c3.appStates=Object.create(null);var d3=Z1(c3.treeNode,c3.appStates,c3.keys);return d3.then(T1.bind(null,c3,_2,$2));});z.oBusyHelper.setBusy(b3,undefined,undefined,true);return b3;}function h2(){return!!W;}function i2(i){l.info("Navigate back");if(V.backTarget&&N(o.getPreviousHash()||"")!==N(V.hash)){z.oBusyHelper.setBusyReason("HashChange",true,undefined,undefined,true);}V.LeaveByBack=!V.forwardingInfo;if(V.LeaveByBack){V.backSteps=i;}window.history.go(-i);}function j2(i,j){i=N(i||"");l.info("Navigate to hash: "+i);if(i===V.hash){l.info("Navigation suppressed since hash is the current hash");return;}V.targetHash=i;if(V.backTarget&&N(o.getPreviousHash()||"")===i){E.navigateBack();return;}z.oBusyHelper.setBusyReason("HashChange",true,undefined,undefined,true);V.LeaveByReplace=j;if(j){E.oHashChanger.replaceHash(i);}else{E.oHashChanger.setHash(i);}}function k2(i,j,$2,_2){var a3=j.then(function(b3){i=v(i,b3);if(_2){V.backwardingInfo={count:_2.count,index:_2.index,targetHash:N(i)};i2(_2.count);}else{j2(i,$2);}return i;});z.oBusyHelper.setBusy(a3,undefined,undefined,true);return a3;}function l2(i,j,$2){var _2=O[V.backTarget];return _2&&_2.hash&&N(_2.hash.split("?")[0])===N(j)&&{count:1,index:V.backTarget};}function m2(i){if(R.treeNode.level===0){return Promise.resolve();}var j={treeNode:z.mRoutingTree["root"],keys:[""],appStates:Object.create(null)};var $2=m1(j);var _2=$2.then(T1.bind(null,j,i));z.oBusyHelper.setBusy(_2,undefined,undefined,true);return _2;}function n2(j,$2){var _2=V.componentsDisplayed;var a3=function(c3){var d3=z.componentRegistry[c3.getId()];(d3.methods.presetDisplayMode||Function.prototype)($2,_2[d3.route]===1);};for(var i=0;i<j.length;i++){var b3=j[i];b3.then(a3);}}function o2(i,j,$2,_2){var a3={};var b3=z.oFlexibleColumnLayoutHandler&&z.oFlexibleColumnLayoutHandler.getFCLAppStatesPromise(i,a3);var c3=o1(i,a3,j);var d3=(b3?Promise.all([b3,c3]):c3).then(u.bind(null,a3));var e3=l2(_2,j,$2);var f3=k2(j,d3,_2,e3);z.oBusyHelper.setBusy(f3,undefined,undefined,true);return f3;}function p2(j,$2,_2,a3){if(typeof j==="string"){var b3=j;var c3=N(b3);if(c3==="/"){return m2(_2);}var d3=c3.split("/");var e3=d3.length-1;var f3=[];var g3;switch(e3){case 1:g3=d3[1].split("(")[0];break;default:g3="";var h3="";for(var i=0;i<e3;i++){var i3=d3[i+1];var j3=i3.indexOf("(");if(j3>0){i3=i3.substring(0,j3);}g3=g3+h3+i3;h3="/";}g3=g3.replace(r.getEmbeddedComponentsPatternDelimiter(),"/");}n2(f3,a3||0);return o2(g3,b3,e3,_2);}return L1(j,_2,a3);}function q2(i,j){V.componentsDisplayed[i]=j;var $2=z.mRoutingTree[i];var _2=$2.componentId;if(_2){var a3=z.componentRegistry[_2];var b3=a3.utils.getTemplatePrivateModel();b3.setProperty("/generic/isActive",j===1);}}function r2(i){var j,$2,_2,a3,b3,c3=null,d3,e3;if(i){j=i.entitySet;$2=i.text;c3=i.icon;e3=i.description;}if(j){d3=z.oAppComponent.getModel().getMetaModel();if(d3){_2=d3.getODataEntitySet(j);a3=d3.getODataEntityType(_2.entityType);b3=a3["com.sap.vocabularies.UI.v1.HeaderInfo"];}if(b3&&b3.TypeImageUrl&&b3.TypeImageUrl.String){c3=b3.TypeImageUrl.String;}}z.oTemplatePrivateGlobalModel.setProperty("/generic/messagePage",{text:$2,icon:c3,description:e3});if(z.oFlexibleColumnLayoutHandler){z.oFlexibleColumnLayoutHandler.displayMessagePage(i,V.componentsDisplayed);}else{var f3=E.oRouter.getTargets();if(!z.ghostapp){f3.display("messagePage");}for(var g3 in V.componentsDisplayed){q2(g3,5);}}q1(i);}function s2(){if(!a(Y)){var j=null;for(var i=0;!j;i++){j=Y[i];}Y={};r2(j);}}function t2(i){if(E.oTemplateContract.oFlexibleColumnLayoutHandler){z.oFlexibleColumnLayoutHandler.hidePlaceholder(R.treeNode.fCLLevel,true);i.viewLevel=i.viewLevel||0;Y[i.viewLevel]=i;var j=Promise.all([d1,E.oTemplateContract.oPagesDataLoadedObserver.getProcessFinished(true)]);j.then(s2);j.then(z.oBusyHelper.setBusyReason.bind(null,"HashChange",false,undefined,undefined,true));return;}z.oNavigationHost.hidePlaceholder();r2(i);z.oBusyHelper.setBusyReason("HashChange",false,undefined,undefined,true);}function u2(){var i=[];if(R||V){var j=R.componentsDisplayed||V.componentsDisplayed;for(var $2 in z.componentRegistry){var _2=z.componentRegistry[$2];if(j[_2.route]===1){i.push($2);}}}return i;}function v2(){var i=[];for(var j in z.componentRegistry){i.push(j);}return i;}function w2(i){return R.keys.slice(0,i+1);}function x2(){var i=R.treeNode.componentId;var j=z.componentRegistry[i];var $2=!!j.nonDraftCreateContext;if($2){var _2=Object.assign({},V);_2.isNonDraftCreate=$2;return _2;}return V;}function y2(i){return z.oApplicationProxy.getAncestralNode(R.treeNode,i);}function z2(i){return i?new Promise(function(j,$2){var _2=n.getAppState(z.oAppComponent,i);_2.done(function(a3){var b3=a3.getData();(b3===undefined?$2:j)(b3);});_2.fail($2.bind(null,undefined));}):Promise.reject();}function A2(j,$2,_2){var a3=_2.getId();var b3=z.componentRegistry[a3];var c3=w2(b3.viewLevel);var d3=b3.route;var e3=$2.componentsDisplayed[d3];var f3=e3===1;var g3=function(m3){b3.sCurrentBindingPath=m3;var n3=function(){b3.utils.bindComponent(b3.sCurrentBindingPath,f3);if(a3===R.treeNode.componentId){var p3=Object.create(null);p3.root=true;for(var h3=R.treeNode;h3.level>0;h3=z.mRoutingTree[h3.parentRoute]){p3[h3.sRouteName]=true;h3.bindElement(z.oNavigationHost,null,true);if(h3.contextTargets){for(var i=0;i<h3.contextTargets.length;i++){var q3=h3.contextTargets[i];h3.bindElement(q3,null,false);}}}for(var r3 in z.mRoutingTree){if(!p3[r3]){var s3=z.mRoutingTree[r3];s3.unbindElement(z.oNavigationHost,true);if(s3.contextTargets){s3.contextTargets.forEach(s3.unbindElement);}}}}b3.utils.refreshBinding();b3.oStatePreserverPromise.then(function(t3){t3.applyAppState(m3,f3);});return(b3.methods.onActivate||Function.prototype)(m3,f3);};var o3=b3.fnViewRegisteredResolve?b3.viewRegistered.then(n3):(n3()||Promise.resolve());return Promise.all([o3,b3.viewRegistered]).then(function(){b3.aKeys=c3;var i=b3.reactivate;if(i){delete b3.reactivate;i.then(function(p3){p3();});}});};V.componentsDisplayed[d3]=1;if($2.isNonDraftCreate&&j==="-"){var h3=z.mRoutingTree[d3];var i3=z.mRoutingTree[h3.parentRoute];var j3=i3.getPath(2,c3);var k3=z.oAppComponent.getModel();var l3=j3?new Promise(function(i){var m3={canonicalRequest:!z.bCreateRequestsCanonical};k3.createBindingContext(j3,null,m3,i);}):Promise.resolve();return l3.then(function(i){var m3=i?h3.navigationProperty:"/"+_2.getEntitySet();var n3=R.appStates[A];var o3=z2(n3);var p3=function(q3){b3.nonDraftCreateContext=a2||b3.nonDraftCreateContext||f.createNonDraft(i,m3,k3,q3,z.oApplicationProxy.mustRequireRequestsCanonical());a2=null;return g3(b3.nonDraftCreateContext.getPath());};return o3.then(p3,p3);});}delete b3.nonDraftCreateContext;return g3(j);}function B2(i,j,$2){return A2(i,j,$2).then(r1);}function C2(i,j,$2){var _2={};if(j||$2){var a3=i.level;for(var b3=0;b3<a3;b3++){_2[b3]=z.oPaginatorInfo[b3];}}z.oPaginatorInfo=_2;}function D2(i){return z.oApplicationProxy.getAlternativeIdentityPromise(i);}var E2=Object.create(null);function F2(i,j){if(E2[i.sRouteName]){return;}var $2=E.createHostView();E2[i.sRouteName]=$2;var _2=E.oRouter.getViews();_2.setView(i.sRouteName,$2);var a3=$2.byId("host");V2(a3,i.sRouteName,j);}function G2(i){var j=z.mRoutingTree;if(j&&j[i]){F2(j[i],true);}}function H2(i){X=false;_.stop();e1.startProcess();H1(i);F2(R.treeNode);R.treeNode.display();if(z.oFlexibleColumnLayoutHandler){$=z.oFlexibleColumnLayoutHandler.handleBeforeRouteMatched(R);}}function I2(){var i={isInitialNavigation:L,historicalEntries:[]};for(var j=V;j.iHashChangeCount>0;j=O[j.backTarget]){var $2=(j===V)?R:j.identity;var _2=$2.treeNode&&{sRouteName:$2.treeNode.sRouteName,keys:$2.keys,appStates:$2.appStates};i.historicalEntries.push(_2);}G.setData(i);G.save();var a3=R.appStates[p];if(a3===I||!(a3||V.backTarget||L)){return false;}W=null;A1({identity:{treeNode:R.treeNode,keys:R.keys,appStates:e(Object.create(null),R.appStates)},mode:1});return true;}function J2(){e1.stopProcess();if(W&&W.followUpNeeded){if(W.identity){if(!v1(W.identity)){A1();return;}}else{var $2=W.followUpNeeded;W=null;A1($2);return;}}z.oBusyHelper.setBusyReason("HashChange",false,undefined,undefined,true);var _2=R.treeNode.level;var a3=N(E.oHashChanger.getHash()||"");l.info("Route matched with hash "+a3);var b3;if(V.backwardingInfo){b3=V;b3.identity=R.previousIdentity;delete R.previousIdentity;O.push(b3);var c3=b3.iHashChangeCount+1;V={iHashChangeCount:c3,forwardingInfo:{bIsProgrammatic:true,bIsBack:true,iHashChangeCount:c3,targetHash:b3.backwardingInfo.targetHash,componentsDisplayed:b3.componentsDisplayed},backTarget:O[b3.backwardingInfo.index].backTarget,componentsDisplayed:Object.create(null)};}if(V.forwardingInfo&&V.forwardingInfo.targetHash&&V.forwardingInfo.targetHash!==a3){V.hash=a3;var d3=V.forwardingInfo.targetHash;delete V.forwardingInfo.targetHash;j2(d3,true);return;}var e3=false;for(var i=0;i<z.aStateChangers.length;i++){var f3=z.aStateChangers[i];if(f3.isStateChange(R.appStates)){e3=true;}}if(e3){W=null;V.hash=a3;if(!I2()){_.start();}return;}z.oTemplatePrivateGlobalModel.setProperty("/generic/routeLevel",_2);var g3=V.forwardingInfo;delete V.forwardingInfo;if(!g3){g3={componentsDisplayed:V.componentsDisplayed,isNonDraftCreate:!R.treeNode.isDraft&&R.keys[R.treeNode.level]==="-"};var h3=V.iHashChangeCount;g3.iHashChangeCount=h3+1;var i3=o.getDirection();if(W){g3.bIsProgrammatic=!!W.identity;g3.bIsBack=W.mode<0;if(g3.bIsBack){V.backSteps=0-W.mode;}g3.bIsForward=!g3.bIsBack&&(i3===h.Forwards);V.LeaveByReplace=W.mode===1;}else{g3.bIsProgrammatic=(a3===V.targetHash);g3.bIsBack=!!(V.LeaveByBack||(!g3.bIsProgrammatic&&(i3===h.Backwards)));g3.bIsForward=!g3.bIsBack&&(i3===h.Forwards);V.LeaveByReplace=g3.bIsProgrammatic&&V.LeaveByReplace;if(!g3.bIsProgrammatic&&R.previousIdentity&&R.previousIdentity.treeNode.level>0&&!R.previousIdentity.treeNode.isDraft){var j3=R.treeNode!==R.previousIdentity.treeNode;for(var j=1;!j3&&j<R.keys.length;j++){j3=R.keys[j]!==R.previousIdentity.keys[j];}if(j3){var k3=z.componentRegistry[R.previousIdentity.treeNode.componentId];var l3=k3.oComponent.getModel("ui");if(l3.getProperty("/editable")){k3.utils.cancelEdit();}}}}V.LeaveByBack=g3.bIsBack;b3=V;b3.identity=R.previousIdentity;delete R.previousIdentity;O.push(b3);V={iHashChangeCount:g3.iHashChangeCount,componentsDisplayed:Object.create(null)};if(b3.LeaveByReplace){V.backTarget=b3.backTarget;}else if(g3.bIsBack){var m3=b3.backTarget;for(var n3=b3.backSteps||1;n3>0;n3--){m3=O[m3].backTarget;}V.backTarget=m3;}else{V.backTarget=h3;}}V.hash=a3;var o3=function(p3){W=null;if(p3){var q3,r3;if(u1(b3.identity,p3.identity)){q3=V.backTarget&&O[V.backTarget];r3=-1;}else if(p3.identity.treeNode.level===0){m2();return;}else{q3=p3.identity;var s3=V.backTarget&&O[V.backTarget];r3=(s3&&s3.treeNode===q3.treeNode)?-1:1;}var t3={identity:q3,mode:r3,displayMode:p3.displayMode};A1(t3);return;}if(I2()){return;}C2(R.treeNode,g3.bIsProgrammatic,g3.bIsBack);if(z.oFlexibleColumnLayoutHandler){d1=z.oFlexibleColumnLayoutHandler.handleRouteMatched(g3);}else{d1=R.treeNode.componentCreated.then(function(u3){return B2(g3.isNonDraftCreate?"-":R.treeNode.getPath(2,R.keys),g3,u3);});}z.oBusyHelper.setBusy(d1,undefined,undefined,true);d1.then(_.start);};if(g3.bIsBack&&!(W&&W.identity)){z.oBusyHelper.setBusy(D2(R).then(o3),undefined,undefined,true);}else{o3();}}function K2(){var i=Promise.all([$,c1.then(function(){return z.oStatePreserversAvailablePromise;})]);var j=i.then(J2,z.oBusyHelper.setBusyReason.bind(null,"HashChange",false,undefined,undefined,true));z.oBusyHelper.setBusy(j,undefined,undefined,true);P2();}function L2(j){O.push(V);var $2;var _2;if(j){L=j.isInitialNavigation;_2=j.serializedBackOption;for(var i=j.historicalEntries.length;i>0;i--){var a3=j.historicalEntries[i-1];$2={iHashChangeCount:O.length,backTarget:O.length-1};if(a3){$2.identity={treeNode:z.mRoutingTree[a3.sRouteName],keys:a3.keys,appStates:a3.appStates};}O.push($2);}}else{$2={iHashChangeCount:1,backTarget:0,identity:R};O.push($2);}a1($2,_2);K2();}function M2(){if(!J||k()){N2();}else if(R.treeNode.sRouteName==="root"&&R.treeNode.componentId){var i=z.oTemplatePrivateGlobalModel;var j=i.getProperty("/generic/bRetainPlaceholder");if(!j){N2();}}if(K&&!O.length){var $2=R.appStates[p];var _2=z2($2);_2.then(L2,L2);return;}K2();}function N2(){if(z.oFlexibleColumnLayoutHandler){z.oFlexibleColumnLayoutHandler.hidePlaceholder(R.treeNode.fCLLevel,true);}else{z.oNavigationHost.hidePlaceholder();}}function O2(){R={appStates:Object.create(null),keys:[]};t2({title:z.getText("ST_ERROR"),text:z.getText("ST_GENERIC_UNKNOWN_NAVIGATION_TARGET"),description:""});z.oBusyHelper.setBusyReason("HashChange",false,undefined,undefined,true);}function P2(){var j=function(e3){if(!e3.selectionInfo){return false;}for(var i=1;i<=e3.level;i++){if(e3.selectionInfo.keys[i]!==R.keys[i]){return false;}}return true;};var $2=function(i,d3,c3,e3){if(i.selectionInfo===d3){c3.setProperty("/generic/currentActiveChildContext",e3);}};for(var _2,a3=R.treeNode;a3;a3=_2){_2=a3.parentRoute&&z.mRoutingTree[a3.parentRoute];if(_2){_2.selectionInfo={pageEntitySet:a3.entitySet,path:a3.getPath(3,R.keys),keys:R.keys.slice(0,a3.level+1)};}var b3=a3.componentId&&z.componentRegistry[a3.componentId];if(b3){var c3=b3.utils.getTemplatePrivateModel();if(j(a3)){var d3=a3.selectionInfo;c3.setProperty("/generic/currentActiveChildContext",d3.path);if(b3.oController.onChildOpenedExtension){b3.oController.onChildOpenedExtension(d3,$2.bind(null,a3,d3,c3));}}else{a3.selectionInfo=null;c3.setProperty("/generic/currentActiveChildContext","");}}}}E.oRouter.attachBeforeRouteMatched(H2);E.oRouter.attachRouteMatched(M2);E.oRouter.attachBypassed(O2);var Q2=[];function R2(i,j){E[i]=j;Q2.push(i);}function S2(){Q2.forEach(function(i){E[i]=_.makeQueuable(E[i]);});E.routerInitialized=Function.prototype;}function T2(i){c1=Promise.all([c1,i.componentCreated]);}function U2(i,j){for(var $2 in j){var _2=j[$2];i.setModel(_2,$2||undefined);}}function V2(i,j,$2){var _2=z.mRoutingTree[j];var a3=_2.page.component.name;var b3=_2.entitySet;var c3=_2.fCLLevel-(_2.fCLLevel===3||!z.oFlexibleColumnLayoutHandler);var d3=c3<0?z.oNavigationObserver:z.aNavigationObservers[c3];var e3=new P();var f3=c3<0?z.oHeaderLoadingObserver:z.aHeaderLoadingObservers[c3];f3.addObserver(e3);var g3={};var h3={appComponent:z.oAppComponent,isLeaf:!_2.page.pages||!_2.page.pages.length,entitySet:b3,navigationProperty:_2.navigationProperty,componentData:{registryEntry:{oAppComponent:z.oAppComponent,route:j,routeConfig:_2.page,viewLevel:_2.level,routingSpec:_2.page.routingSpec,oNavigationObserver:d3,oHeaderLoadingObserver:e3,preprocessorsData:g3}}};if(_2.page.component.settings){e(h3,_2.page.component.settings);}z.oAppComponent.runAsOwner(function(){var i3=sap.ui.core.Component.create({name:a3,settings:h3,handleValidation:true,manifest:true});i3.then(function(j3){if($2){U2(i,z.oAppComponent.oModels);i.setComponent(j3);j3.onBeforeRendering();}else{i.setComponent(j3);}});});}function W2(){X=true;}function X2(j){if(X){X=false;return false;}if(W){return false;}if(j.isCrossAppNavigation){return true;}var $2=E.oRouter.getRouteInfoByHash(j.innerAppRoute);var _2=G1($2.name,$2.arguments);return _2.treeNode!==R.treeNode||_2.keys.some(function(a3,i){return a3!==R.keys[i];});}function Y2(i){return i.isDraft?z.oApplicationProxy.getAncestralNode(R.treeNode,1):i;}function Z2(){if(R.treeNode.level===0){return false;}var i=G.getData().historicalEntries;if(i.length===1||i[1].sRouteName==="root"){return true;}var j=Y2(R.treeNode);var $2=z.mRoutingTree[i[1].sRouteName];var _2=Y2($2);return j!==_2;}E.routerInitialized=S2;E.treeNodeFirstDisplay=T2;E.navigate=j2;R2("navigateBack",A1.bind(null,{mode:-1}));E.activateOneComponent=A2;E.afterActivation=r1;E.addUrlParameterInfoForRoute=o1;E.getApplicableStateForIdentityAddedPromise=m1;E.adaptAppStates=n1;E.setVisibilityOfRoute=q2;E.getActiveComponents=u2;E.getAllComponents=v2;E.getRootComponentPromise=h1;E.getActivationInfo=x2;E.getCurrentKeys=w2;E.getAppTitle=i1;E.getParsedShellHashFromFLP=k1;E.isDiscardDraftConfirmationNeeded=j1;R2("navigateByExchangingQueryParam",I1);R2("navigateToSubContext",L1);R2("navigateToDetailContextIfPossible",M1);E.getSwitchToSiblingPromise=Q1;E.getSpecialDraftCancelPromise=O1;E.getSpecialDraftCancelOptionPromise=N1;E.setBackNavigationOption=P1;E.getCurrentIdentity=s1;R2("navigateToIdentity",T1);R2("navigateAfterActivation",$1);R2("navigateUpAfterDeletion",_1);R2("navigateForNonDraftCreate",b2);R2("adaptUrlAfterNonDraftCreateSaved",c2);R2("navigateToChild",f2);R2("navigateFromNodeAccordingToContext",g2);E.isNavigating=h2;E.getLinksToUpperLayers=F1;E.setTextForTreeNode=B1;R2("navigationContextNotFound",U1);E.clearHistory=_.makeQueuable(g1);E.suspend=f1;E.restore=b1.bind(null,false);E.prepareHostView=F2;E.preloadComponent=G2;E.navigateToMessagePage=t2;E.getAppStateFromShell=z2;E.userHasAcceptedDataLoss=W2;E.unwantedDataLossPossible=X2;E.isBackLeavingTheEditScope=Z2;var V2=t.testable(V2,"createTemplateComponent");var k1=t.testable(k1,"getParsedShellHashFromFLP");var G2=t.testable(G2,"preloadComponent");t.testable(function(i){E.createHostView=i;},"setCreateHostView");t.testable(function(i){F2=i;},"setPrepareHostView");z.oBusyHelper.setBusy((k1()||Promise.resolve()).then(function(i){var j=i&&i.parseParameters(document.location.search);if(j&&j["sap-ui-xx-placeholder"]){var $2=j["sap-ui-xx-placeholder"][0]==='false'?false:true;z.bEnablePlaceholder=$2;}J=z.bEnablePlaceholder;return r.generateRoutingStructure(z).then(b1.bind(null,true));}),undefined,undefined,true);return{navigateToRoot:_.makeQueuable(m2),navigateToContext:_.makeQueuable(p2),navigateToMessagePage:t2,navigateBack:function(){E.navigateBack();}};}function x(i,j){var R=j.oAppComponent.getRouter();var z={oAppComponent:j.oAppComponent,oRouter:R,oHashChanger:R.getHashChanger(),oTemplateContract:j};j.oNavigationControllerProxy=z;var E=new Promise(function(G){z.initialize=function(I){R.initialize(I);G();z.routerInitialized();};z.fnInitializationResolve=G;});j.oBusyHelper.setBusy(E,undefined,undefined,true);e(i,w(j,z));}var y=B.extend("sap.suite.ui.generic.template.lib.navigation.NavigationController",{metadata:{library:"sap.suite.ui.generic.template"},constructor:function(i){B.apply(this,arguments);t.testableStatic(x,"NavigationController")(this,i);}});y._sChanges="Changes";return y;});
