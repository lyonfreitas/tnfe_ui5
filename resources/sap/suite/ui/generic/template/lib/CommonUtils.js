sap.ui.define(["sap/ui/base/Object","sap/ui/base/Event","sap/ui/core/mvc/ControllerExtension","sap/ui/model/Context","sap/ui/model/Filter","sap/m/Table","sap/m/MessageBox","sap/ui/generic/app/navigation/service/SelectionVariant","sap/ui/generic/app/navigation/service/NavError","sap/suite/ui/generic/template/genericUtilities/controlHelper","sap/suite/ui/generic/template/genericUtilities/metadataAnalyser","sap/suite/ui/generic/template/genericUtilities/testableHelper","sap/suite/ui/generic/template/genericUtilities/FeLogger","sap/ui/model/analytics/odata4analytics","sap/base/util/extend","sap/base/util/deepExtend","sap/suite/ui/generic/template/genericUtilities/FeError","sap/suite/ui/generic/template/js/StableIdHelper","sap/suite/ui/generic/template/genericUtilities/ControlStateWrapperFactory","sap/suite/ui/generic/template/genericUtilities/oDataModelHelper"],function(B,E,C,a,F,R,M,S,N,c,m,t,b,o,d,f,g,h,l,D){"use strict";var s="lib.CommonUtils";var n=sap.ui.getCore();var L=new b(s).getLogger();function p(q,r,u){var v;var w=new l(q);var x=Object.create(null);var O=Object.create(null);function P(e){var i;if(c.isSmartTable(e)){i=e.getCustomToolbar();}else if(c.isSmartChart(e)){i=e.getToolbar();}if(i){var j=W(i);if(j&&j.annotatedActionIds){O[e.getId()]=JSON.parse(atob(j.annotatedActionIds));}if(j&&j.deleteButtonId){O[e.getId()].push({ID:j.deleteButtonId,RecordType:"CRUDActionDelete"});}if(j&&j.multiEditButtonId){O[e.getId()].push({ID:j.multiEditButtonId,RecordType:"CRUDActionMultiEdit"});}}}function G(e){if(!O[e.getId()]){P(e);}return O[e.getId()];}function y(e){var i,j,k;i=q.getOwnerComponent().getModel().getMetaModel();j=i.getODataEntitySet(e);k=i.getODataEntityType(j.entityType);return k;}function z(e,i,j){var k=e instanceof E?e.getSource():e;var I1=k.getId();var J1=x[I1];if(!J1){if(j){return null;}J1={control:k,infoObject:Object.create(null),categories:[]};(i||Function.prototype)(J1.infoObject,J1.categories,k);x[I1]=J1;}return J1.infoObject;}function A(e,i){for(var j in x){var k=x[j];if(k.categories.indexOf(e)>=0){i(k.infoObject,k.control);}}}function H(e){r.oApplication.attachControlToParent(e,q.getView());}function I(e,i,j){var k="";var I1=q.getView();var J1=e.find(function(K1){var L1;var M1=j&&function(N1){j(K1,N1,L1);L1=N1;};if(c.isElementVisibleOnView(K1,I1,M1)){if(i){var N1=n.byId(K1);if(c.isSmartTable(N1)||c.isMTable(N1)||c.isUiTable(N1)){k=k||K1;return false;}}return true;}});return J1||k;}function J(e,i,j,k){return r.oApplication.getDialogFragmentForView(q.getView(),e,i,j,k);}function K(e,i,j,k,I1){return r.oApplication.getDialogFragmentForViewAsync(q.getView(),e,i,j,k,I1);}var Q;function T(k,e,i){var j=q.getOwnerComponent();Q=Q||j.getModel("i18n").getResourceBundle();return Q.getText(k,e,i);}function U(k,e,i,j){var I1,J1,K1,L1;var M1=q.getOwnerComponent();var N1=e.indexOf("::"+M1.getEntitySet()+"--")+2;I1=e.substring(N1,e.lastIndexOf("::"));I1=I1.replace(/--/g,"|").replace(/::/g,"|");K1=i||k;J1=I1&&I1!='|'?k+"|"+I1:K1;L1=T(J1,j,true);if(!L1&&J1!=K1){L1=T(K1,j);}return L1;}function V(i,e){var e=e||i.getSelectionBehavior();if(e==="DATAPOINT"){return{"dataPoints":i.getSelectedDataPoints().dataPoints,"count":i.getSelectedDataPoints().count};}else if(e==="CATEGORY"){return{"dataPoints":i.getSelectedCategories().categories,"count":i.getSelectedCategories().count};}else if(e==="SERIES"){return{"dataPoints":i.getSelectedSeries().series,"count":i.getSelectedSeries().count};}}function W(e){var i={};if(e instanceof sap.ui.core.Element){e.getCustomData().forEach(function(j){i[j.getKey()]=j.getValue();});}return i;}function X(e){var j,k;var I1=g1(e);if(!c.isSmartTable(I1)&&!c.isSmartChart(I1)){I1=I1.getParent();}var J1=r.oPresentationControlHandlerFactory.getPresentationControlHandler(I1).getSelectedContexts();var K1=I1.getModel();d1(J1,K1,I1);j=G(I1);for(var i=0;i<j.length;i++){k=j[i];Y(k,K1,J1,I1);}}function Y(e,i,j,k){var I1;if(e.RecordType==="CRUDActionDelete"){var J1=a1(i,j,k);u.getTemplatePrivateModel().setProperty("/listReport/deleteEnabled",J1);I1=Promise.resolve(J1);}else if(e.RecordType==="com.sap.vocabularies.UI.v1.DataFieldForAction"||e.RecordType==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"){var K1=i.getMetaModel();I1=_(i,K1,j,e.RecordType,e.Action,k);}else if(e.RecordType==="CRUDActionMultiEdit"){u.getTemplatePrivateModel().setProperty("/listReport/multiEditEnabled",j.filter(c1).length>0);}var L1=q.getView().byId(e.ID);if(L1&&/generic\/controlProperties/.test(L1.getBindingPath("enabled"))){I1.then($.bind(null,e.ID,"enabled"));}}function Z(e){var i=h1(e);d1(r.oPresentationControlHandlerFactory.getPresentationControlHandler(i).getSelectedContexts(),e.getModel(),i);}function $(i,e,j){var k=u.getTemplatePrivateModel();var I1=k.getProperty("/generic/controlProperties/"+i);if(!I1){I1={};I1[e]=j;k.setProperty("/generic/controlProperties/"+i,I1);}else{k.setProperty("/generic/controlProperties/"+i+"/"+e,j);}}function _(e,i,k,I1,J1,K1){var L1,M1,N1,O1;var P1=false;if(I1==="com.sap.vocabularies.UI.v1.DataFieldForAction"){L1=i.getODataFunctionImport(J1);N1=L1&&L1["sap:action-for"];if(N1&&N1!==""&&N1!==" "){if(k.length>0){O1=L1["sap:applicable-path"];if(O1&&O1!==""&&O1!==" "){for(var j=0;j<k.length;j++){if(!k[j]){continue;}M1=e.getObject(k[j].getPath());if(M1&&M1[O1]){P1=true;break;}}}else{P1=true;}}}else{P1=true;}}else if(I1==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"){if(k.length>0){P1=true;}else if(c.isSmartChart(K1)){return K1.getChartAsync().then(function(){return K1.getDrillStackFilters().length>0;});}}return Promise.resolve(P1);}function a1(e,i,j){if(i.length===0){return false;}var k=b1(j);var I1=k&&k.Deletable&&k.Deletable.Path;return i.some(function(J1){var K1=e.getObject(J1.getPath()+"/DraftAdministrativeData");var L1=!(K1&&K1.InProcessByUser&&!K1.DraftIsProcessedByMe);return L1&&!(I1&&!e.getProperty(I1,J1));});}function b1(e){var i=e.getModel()&&e.getModel().getMetaModel();var j=i&&i.getODataEntitySet(e.getEntitySet());var k=j&&j["Org.OData.Capabilities.V1.DeleteRestrictions"];return k;}function c1(e){var i=e.getModel();var j=i.getMetaModel().getODataEntitySet(D.analyseContext(e).entitySet);var k=j["Org.OData.Capabilities.V1.UpdateRestrictions"]&&j["Org.OData.Capabilities.V1.UpdateRestrictions"].Updatable;if(k){if(k.Path){return!!i.getProperty(k.Path,e);}else if(k.Bool!=="false"){return true;}}}function d1(e,i,j){var k=f1(j);var I1=u.getTemplatePrivateModel();var J1=I1.getProperty("/generic/listCommons/breakoutActionsEnabled");if(k){var K1=q.byId("template::IconTabBar");var L1="";if(K1){L1=K1.getSelectedKey();}e1(J1,k,e,i,L1,j);}I1.setProperty("/generic/listCommons/breakoutActionsEnabled",J1);}function e1(e,i,j,k,I1,J1){var K1;for(var L1 in i){K1=true;var M1=i[L1].id+((I1&&!i[L1].determining)?"-"+I1:"");if(J1&&J1.getId().indexOf("AnalyticalListPage")>-1){K1=!!e[M1].enabled;}if(i[L1].requiresSelection){if(j.length>0){if(J1&&c.isSmartChart(J1)){if(i[L1].filter==="chart"){K1=true;}}else if(J1&&c.isSmartTable(J1)){if(i[L1].filter!=="chart"){K1=true;}}if(i[L1].applicablePath!==undefined&&i[L1].applicablePath!==""){K1=false;for(var N1=0;N1<j.length;N1++){var O1="";var P1=i[L1].applicablePath.split("/");if(P1.length>1){for(var Q1=0;Q1<P1.length-1;Q1++){O1+="/"+P1[Q1];}}var R1=k.getObject(j[N1].getPath()+O1);var S1=P1[P1.length-1];if(R1[S1]===true){K1=true;break;}}}}else if(c.isSmartChart(J1)){if((J1.getId().indexOf("AnalyticalListPage")>-1?i[L1].filter==="chart":true)){if(J1.getDrillStackFilters().length>0){K1=true;}else{K1=false;}}}else{if(i[L1].filter!=="chart"){K1=false;}}}e[M1]={enabled:K1};}}function f1(e){var i=u.getControllerExtensions();var j=W(e).sectionId;if(!j){return i&&i["Actions"];}else{return i&&i.Sections&&i.Sections[j]&&i.Sections[j].Actions;}}function g1(e){var i=e;while(i){if(i instanceof R||c.isUiTable(i)||c.isSmartTable(i)||c.isSmartChart(i)||c.isSmartList(i)){return i;}i=i.getParent&&i.getParent();}return null;}function h1(e){var i=e;while(i){if(c.isSmartTable(i)||c.isSmartChart(i)||c.isSmartList(i)){return i;}i=i.getParent&&i.getParent();}return null;}function i1(e){var i=q.getOwnerComponent();var j=i.getModel();if(!r.oApplication.checkEtags()&&e){var k=j.getMetaModel().getODataEntitySet(e);if(q.getMetadata().getName()==='sap.suite.ui.generic.template.AnalyticalListPage.view.AnalyticalListPage'&&j1(j,k)){j.invalidateEntityType(k.entityType);}else{j.invalidate(k1.bind(null,e));}var I1=i.getId();var J1=Object.create(null);J1[I1]=true;r.oApplication.refreshAllComponents(J1);return true;}return false;}function j1(e,i){var j=new o.Model(o.Model.ReferenceByModel(e));var k=j.findQueryResultByName(i.name);var I1=k&&k.getParameterization();return!!I1;}function k1(e,k){return k.split("(")[0]===e;}function l1(e,i){var j;if(u.isDraftEnabled()){j=r.oDraftController.isActiveEntity(e)?1:6;}else{var k=q.getOwnerComponent();j=k.getModel("ui").getProperty("/editable")?6:1;}u.navigateAccordingToContext(e,j,i);}function m1(e){if(e instanceof N){if(e.getErrorCode()==="NavigationHandler.isIntentSupported.notSupported"){M.show(T("ST_NAV_ERROR_NOT_AUTHORIZED_DESC"),{title:T("ST_GENERIC_ERROR_TITLE")});}else{M.show(e.getErrorCode(),{title:T("ST_GENERIC_ERROR_TITLE")});}}}function n1(e,i){z1(function(){v=r.oApplication.getNavigationHandler();var j={semanticObject:e.semanticObject,action:e.action};var k=v.mixAttributesAndSelectionVariant(e.parameters);if(typeof q.adaptNavigationParameterExtension==="function"){q.adaptNavigationParameterExtension(k,j);}H1(e);v.navigate(e.semanticObject,e.action,k.toJSONString(),null,m1);},Function.prototype,"LeaveApp");}function o1(e){var I1=[],J1,K1,L1;var M1=q.getOwnerComponent();var N1=M1.getModel().getMetaModel();if(!e){return{};}var O1=M1.getAppComponent().getConfig().pages[0];if(!O1){return{};}var P1=function(i){L1=N1.getODataEntitySet(i.entitySet).entityType;K1=N1.getODataEntityType(L1);J1={};J1={entitySet:i.entitySet,aKeys:N1.getODataEntityType(L1).key.propertyRef,navigationProperty:i.navigationProperty};for(var j=0,R1=J1.aKeys.length;j<R1;j++){var k=0,S1=K1.property.length;for(k;k<S1;k++){if(J1.aKeys[j].name===K1.property[k].name){J1.aKeys[j].type=K1.property[k].type;break;}}}};var Q1=function(e,O1){if(!O1.pages){return I1;}for(var i=0,j=O1.pages.length;i<j;i++){if(!O1.pages[i]){break;}if(e===O1.pages[i].entitySet){P1(O1.pages[i]);I1.splice(0,0,J1);break;}I1=Q1(e,O1.pages[i]);if(I1.length>0){P1(O1.pages[i]);I1.splice(0,0,J1);}}return I1;};return Q1(e,O1);}function p1(k,e){var I1,J1,i,K1;for(i=0,K1=k.length;i<K1;i++){if(k[i].navigationProperty){J1+="/"+k[i].navigationProperty;}else{J1="/"+k[i].entitySet;}for(var j=0,L1=k[i].aKeys.length;j<L1;j++){if(j===0){J1+="(";I1="";}else{I1=",";}switch(k[i].aKeys[j].type){case"Edm.Guid":if(e.DraftAdministrativeData&&e.DraftAdministrativeData.DraftIsCreatedByMe){J1+=I1+k[i].aKeys[j].name+"="+"guid'"+e.DraftAdministrativeData.DraftUUID+"'";}else{J1+=I1+k[i].aKeys[j].name+"="+"guid'"+e[k[i].aKeys[j].name]+"'";}break;case"Edm.Boolean":if(e.DraftAdministrativeData&&e.DraftAdministrativeData.DraftIsCreatedByMe){J1+=I1+k[i].aKeys[j].name+"="+false;}else{J1+=I1+k[i].aKeys[j].name+"="+e[k[i].aKeys[j].name];}break;default:if(typeof e[k[i].aKeys[j].name]==="string"){J1+=I1+k[i].aKeys[j].name+"="+"'"+e[k[i].aKeys[j].name]+"'";}else{J1+=I1+k[i].aKeys[j].name+"="+e[k[i].aKeys[j].name];}break;}if(j===(L1-1)){J1+=")";}}}return J1;}function q1(e,k,q,I1){var J1,K1,L1,M1,N1,O1,P1;var Q1={semanticObject:"",action:""};var R1=e.getParameters();v=r.oApplication.getNavigationHandler();J1=v.mixAttributesAndSelectionVariant({},k);for(M1 in R1.semanticAttributesOfSemanticObjects){for(L1 in R1.semanticAttributesOfSemanticObjects[M1]){if(!J1.getSelectOption(L1)){J1.addParameter(L1,"");}}N1=J1.getPropertyNames();Q1.semanticObject=M1;O1=J1.getSelectOptionsPropertyNames();P1=J1.getParameterNames();for(var i=0,S1=N1.length;i<S1;i++){if(O1.indexOf(N1[i])<0&&P1.indexOf(N1[i])<0){delete R1.semanticAttributesOfSemanticObjects[M1][N1[i]];J1.removeSelectOption(N1[i]);}}if(M1===R1.semanticObject){var T1=R1.semanticAttributesOfSemanticObjects[""];for(var j=0,S1=P1.length;j<S1;j++){J1.removeParameter(P1[j]);if(!(P1[j]in T1)){var U1=R1.semanticAttributesOfSemanticObjects[R1.semanticObject][P1[j]];U1=(typeof U1==="undefined"||U1===null)?"":String(U1);J1.addParameter(P1[j],U1);}}J1=v.mixAttributesAndSelectionVariant(R1.semanticAttributesOfSemanticObjects[M1],J1.toJSONString());J1=r1(J1,e.getSource(),I1);q.adaptNavigationParameterExtension(J1,Q1);K1=J1.toJSONString();}}delete R1.semanticAttributes;v.processBeforeSmartLinkPopoverOpens(R1,K1);}function r1(e,i,j){var k;var I1=[];var J1=q.getOwnerComponent().getEntitySet();if(!c.isSemanticObjectController(i)&&!c.isSmartTable(i)){var K1=g1(i)&&g1(i).getParent();if(c.isSmartTable(K1)){i=K1;k=i.getEntitySet();}else{k=J1;}}else{k=i.getEntitySet();}I1.push(k);var L1=j&&j.oMultipleViewsHandler&&j.oMultipleViewsHandler.getMode&&j.oMultipleViewsHandler.getMode()==="multi";if((k!==J1)&&!L1){I1.push(J1);}I1.forEach(function(M1){if(i){var N1=i.getModel().getMetaModel();var O1=N1.getODataEntityType(N1.getODataEntitySet(M1).entityType);e.getPropertyNames().forEach(function(P1){var Q1=N1.getODataProperty(O1,P1);if(Q1&&((Q1["com.sap.vocabularies.UI.v1.ExcludeFromNavigationContext"]&&Q1["com.sap.vocabularies.UI.v1.ExcludeFromNavigationContext"].Bool!=="false")||(Q1["com.sap.vocabularies.PersonalData.v1.IsPotentiallySensitive"]&&Q1["com.sap.vocabularies.PersonalData.v1.IsPotentiallySensitive"].Bool!=="false"))){e.removeSelectOption(P1);}});}});return e;}function s1(e,j){var k=function(M1){for(var i=0;i<M1.length;i++){j(M1[i].name);}};var I1=q.getView().getModel().getMetaModel();var J1=I1.getODataEntitySet(e,false);var K1=I1.getODataEntityType(J1.entityType,false);k(K1.key.propertyRef);var L1=r.oDraftController.getDraftContext();if(L1.isDraftEnabled(e)){k(L1.getSemanticKey(e));j("IsActiveEntity");j("HasDraftEntity");j("HasActiveEntity");}}function t1(i,j,k,I1){if(I1&&k&&k.getAnalyticBindingPath&&k.getConsiderAnalyticalParameters()){try{var J1=k.getAnalyticBindingPath();var K1=i.getEntitySet();var L1=i.getModel();var M1=L1.getMetaModel();var N1=M1.getODataEntitySet(K1);var O1=q.getOwnerComponent();var P1=O1.getAppComponent();var Q1=m.getParametersByEntitySet(P1.getModel(),K1);if(j){var R1=j(N1,Q1);J1=R1||J1;}if(J1){I1(J1);}}catch(e){L.warning("Mandatory parameters have no values");}}}function u1(e,j,k){for(var i=0;i<j.length;i++){var I1=j[i];var J1=I1.lastIndexOf("/");var K1;if(J1<0){if(r.oApplication.getNavigationProperty(e,I1)){K1=I1;}else{continue;}}else{K1=I1.substring(0,J1);}if(k.indexOf(K1)===-1){k.push(K1);}}}function v1(e,i,j){var k=e.getParameter("bindingParams"),I1=e.getSource().getId();k.parameters=k.parameters||{};k.parameters.transitionMessagesOnly=u.getNoStateMessagesForTables();var J1=function(Q1,R1,I1){if(i&&i[Q1]){var S1=true;var T1=function(){var U1=arguments[0];if(!(U1 instanceof C)){throw new g(s,"Please provide a valid ControllerExtension in order to execute extension "+Q1);}if(!S1){throw new g(s,"Extension "+Q1+" must be executed synchronously");}var V1=Array.prototype.slice.call(arguments,1);R1.apply(null,V1);};i[Q1](T1,I1);S1=false;}};var K1=function(Q1){if(!I1||q.byId(I1)===e.getSource()){k.filters.push(Q1);}};if(i.addTemplateSpecificFilters){i.addTemplateSpecificFilters(k.filters);}J1("addExtensionFilters",K1,I1);var L1=e.getSource();if(q.getMetadata().getName()!=='sap.suite.ui.generic.template.ObjectPage.view.Details'){t1(L1,i.resolveParamaterizedEntitySet,j,i.setBindingPath);}var M1=L1.getEntitySet();var N1=k.parameters.select&&k.parameters.select.split(",")||[];var O1=k.parameters.expand&&k.parameters.expand.split(",")||[];var P1=function(Q1,I1){if(Q1&&(!I1||q.byId(I1)===e.getSource())){var R1=Q1.split(',');R1.forEach(function(S1){if(S1&&N1.indexOf(S1)===-1){N1.push(S1);}});}};if(i.isMandatoryFiltersRequired){s1(M1,P1);}J1("ensureExtensionFields",P1,I1);(i.addNecessaryFields||Function.prototype)(N1,P1,M1);u1(M1,N1,O1);if(O1.length>0){k.parameters.expand=O1.join(",");}if(N1.length>0){k.parameters.select=N1.join(",");}}function w1(e,i,j){if(!e){return T("DRAFT_OBJECT");}else if(i){return T(j?"LOCKED_OBJECT":"UNSAVED_CHANGES");}else{return"";}}function x1(){return new Promise(function(e){var i;K("sap.suite.ui.generic.template.fragments.DraftAdminDataPopover",{formatText:function(){var j=Array.prototype.slice.call(arguments,1);var k=arguments[0];if(!k){return"";}if(j.length>0&&(j[0]===null||j[0]===undefined||j[0]==="")){if(j.length>3&&(j[3]===null||j[3]===undefined||j[3]==="")){return(j.length>2&&(j[1]===null||j[1]===undefined||j[1]===""))?"":j[2];}else{return T(k,j[3]);}}else{return T(k,j[0]);}},closeDraftAdminPopover:function(){i.close();},formatDraftLockText:w1},"admin").then(function(j){i=j;e(i);});});}function y1(e,i,j,k){return r.oDataLossHandler.performIfNoDataLoss(e,i,k,true,true);}function z1(e,i,j,k){j=j||"LeavePage";if(u.isDraftEnabled()){return r.oPageLeaveHandler.performAfterDiscardOrKeepDraft(e,i,j,k,false);}else{return r.oDataLossHandler.performIfNoDataLoss(e,i,j,k,false);}}function A1(e,i){i=f({busy:{set:true,check:true},dataloss:{popup:true,navigation:false}},i);var j,k;var I1=new Promise(function(M1,N1){j=M1;k=N1;});var J1=i.busy.set?function(){r.oApplication.getBusyHelper().setBusy(I1,false,{actionLabel:i.sActionLabel});return e();}:e;var K1=i.mConsiderObjectsAsDeleted?function(M1){r.oApplication.prepareDeletion(i.mConsiderObjectsAsDeleted);return J1();}:J1;var L1=function(){var M1;if(u.isDraftEnabled()){M1=K1();}else{M1=(i.dataloss.popup?z1(K1,k,null,(i.dataloss.navigation?"LeavePage":"Proceed"),true):K1());}if(M1 instanceof Promise){M1.then(j,k);}else{j(M1);}};r.oApplication.performAfterSideEffectExecution(L1,i.busy.check&&k);return I1;}function B1(e){var i=e.getId()+"-variant";var j=sap.ui.getCore().byId(i);var k=j.getDefaultVariantKey();return k===j.STANDARDVARIANTKEY?"":k;}function C1(e){var i=e.getId()+"-variant";var j=sap.ui.getCore().byId(i);var k=j.getDefaultVariantKey();return k===j.STANDARDVARIANTKEY?"":k;}function D1(e){var j;var k=u.getTemplatePrivateModel();var I1=q.getOwnerComponent();var J1,K1,L1,M1,N1,O1=[],P1=[],i,Q1,R1,S1,T1,U1,V1;var W1,X1;J1=I1.getAppComponent();K1=sap.ushell&&sap.ushell.Container&&sap.ushell.Container.getService&&sap.ushell.Container.getService("CrossApplicationNavigation");L1=k.getProperty("/generic/supportedIntents/");if(c.isSmartChart(e)){j=e.getToolbar();}else if(c.isSmartTable(e)){j=e.getCustomToolbar();}M1=j.getContent();N1=M1.length;for(i=0;i<N1;i++){Q1=W(M1[i]);if(Q1.hasOwnProperty("SemanticObject")&&Q1.hasOwnProperty("Action")){R1=Q1.SemanticObject;S1=Q1.Action;T1={semanticObject:R1,action:S1,ui5Component:J1};O1.push([T1]);U1=d({},T1);U1.bLinkIsSupported=false;P1.push(U1);}}if(O1.length>0&&K1){V1=K1.getLinks(O1);V1.done(function(Y1){L1=k.getProperty("/generic/supportedIntents/");W1=Y1.length;for(i=0;i<W1;i++){if(Y1[i][0].length>0){P1[i].bLinkIsSupported=true;}R1=P1[i].semanticObject;S1=P1[i].action;X1=k.getProperty("/generic/supportedIntents/"+R1);if(!X1){L1[R1]={};L1[R1][S1]={"visible":P1[i].bLinkIsSupported};}else if(!X1[S1]){X1[S1]={"visible":P1[i].bLinkIsSupported};}else{X1[S1]["visible"]=P1[i].bLinkIsSupported;}}k.updateBindings();});}}function E1(e,i){var j=i&&q.byId(i);var k=(i&&!j)?Promise.reject():new Promise(function(I1,J1){r.oApplication.performAfterSideEffectExecution(function(){var K1=r.oApplication.getBusyHelper();if(K1.isBusy()){J1();return;}if(j&&(!j.getVisible()||(j.getEnabled&&!j.getEnabled()))){J1();return;}var k=j?e(j):e();if(k instanceof Promise){k.then(I1,J1);K1.setBusy(k);}else{I1(k);}});});k.catch(Function.prototype);return k;}function F1(e,i,j,k,I1){var J1,K1={};if(!i){J1=[];}else if(Array.isArray(i)){J1=i;}else{J1=[i];}if(j){K1.urlParameters=j;}if(k&&k.bInvocationGroupingChangeSet){K1.operationGrouping="com.sap.vocabularies.UI.v1.OperationGroupingType/ChangeSet";}K1.triggerChanges=u.isDraftEnabled();u.executeBeforeInvokeActionFromExtensionAPI(I1);var L1=r.oApplicationController.invokeActions(e,J1,K1);if(k&&k.bSetBusy){u.getBusyHelper().setBusy(L1);}L1.then(u.executeAfterInvokeActionFromExtensionAPI.bind(null,I1));return L1;}function G1(e){var i=r.oApplication.getChevronNavigationRefreshBehaviour(e);if(i!==Object.create(null)){r.oViewDependencyHelper.setRefreshBehaviour(i);}}function H1(e){var i=r.oApplication.getComponentRefreshBehaviour(e);r.oViewDependencyHelper.setRefreshBehaviour(i);}var d1=t.testable(d1,"fillEnabledMapForBreakoutActions");var g1=t.testable(g1,"getOwnerControl");var G=t.testable(G,"fnGetToolbarCustomData");var r1=t.testable(r1,"removePropertiesFromNavigationContext");return{getPositionableControlId:I,getMetaModelEntityType:y,getText:T,getContextText:U,getNavigationKeyProperties:o1,mergeNavigationKeyPropertiesWithValues:p1,executeGlobalSideEffect:function(){if(u.isDraftEnabled()){var e=q.getView();var i=q.getOwnerComponent();var j=i.getAppComponent();var k=j.getForceGlobalRefresh();var I1=i.getModel("ui");e.attachBrowserEvent("keydown",function(J1){var K1=J1.target.type==="search";var L1=J1.target.type==="textarea";var M1=J1.target.id.indexOf("rowAction")>-1;var N1=J1.target.id.indexOf("ColumnListItem")>-1;if(J1.keyCode===13&&J1.ctrlKey!==true&&I1.getProperty("/editable")&&!K1&&!L1&&!M1&&!N1){r.oApplication.addSideEffectPromise(new Promise(function(O1,P1){var Q1;if(J1.target.type==="text"){var R1=J1.target.parentElement;while(R1){Q1=e.byId(R1.id);if(Q1&&Q1.getMetadata().getElementName()==="sap.ui.comp.smartform.SmartForm"){break;}R1=R1.parentElement;}}var S1=Q1?Q1.check():Promise.resolve();S1.then(function(){setTimeout(function(){var T1=r.oApplicationController.executeSideEffects(e.getBindingContext(),null,null,k);T1.then(function(){O1();setTimeout(function(){var U1=document.getElementById(J1.target.id);if(U1){U1.focus();}});},P1);});});}));}});}},setEnabledToolbarButtons:X,setEnabledFooterButtons:Z,fillEnabledMapForBreakoutActions:d1,getBreakoutActions:f1,getSelectionPoints:V,getDeleteRestrictions:b1,getSmartTableDefaultVariant:B1,getSmartChartDefaultVariant:C1,setPrivateModelControlProperty:$,removePropertiesFromNavigationContext:r1,navigateFromListItem:l1,navigateExternal:n1,semanticObjectLinkNavigation:q1,getCustomData:function(e){var j=e.getSource().getCustomData();var k={};for(var i=0;i<j.length;i++){k[j[i].getKey()]=j[i].getValue();}return k;},getCustomDataText:function(e){return new Promise(function(j,k){e.getCustomData().forEach(function(I1){var J1=I1.getKey();if(J1==="text"){var K1=I1.getBinding("value");var L1=!K1&&I1.getBindingInfo("value");if(!K1&&!L1){j(I1.getValue());return;}var M1=function(N1){j(N1.getSource().getExternalValue());return;};if(K1){K1.attachChangeOnce(M1);}else{L1.events={change:M1};for(var i=0;i<L1.parts.length;i++){L1.parts[i].targetType="string";}}}});});},onBeforeRebindTableOrChart:v1,formatDraftLockText:w1,showDraftPopover:function(e,i){x1().then(function(j){var k=j.getModel("admin");k.setProperty("/IsActiveEntity",e.getProperty("IsActiveEntity"));k.setProperty("/HasDraftEntity",e.getProperty("HasDraftEntity"));j.bindElement({path:e.getPath()+"/DraftAdministrativeData"});if(j.getBindingContext()){j.openBy(i);}else{j.getObjectBinding().attachDataReceived(function(){j.openBy(i);});}});},getContentDensityClass:function(){return r.oApplication.getContentDensityClass();},attachControlToView:H,getDialogFragment:J,getDialogFragmentAsync:K,fnProcessDataLossOrDraftDiscardConfirmation:z1,processDataLossTechnicalErrorConfirmation:y1,securedExecution:A1,getOwnerControl:g1,getOwnerPresentationControl:h1,refreshModel:i1,getElementCustomData:W,triggerAction:function(e,i,j,k){r.oDataLossHandler.performIfNoDataLoss(function(){r.oCRUDManager.callAction({functionImportPath:j.Action,contexts:e,sourceControlHandler:k,label:j.Label,operationGrouping:""}).then(function(I1){if(I1&&I1.length>0){var J1=I1[0];if(J1.response&&J1.response.context&&(!J1.actionContext||J1.actionContext&&J1.response.context.getPath()!==J1.actionContext.getPath())){r.oApplication.getBusyHelper().getUnbusy().then(r.oViewDependencyHelper.setMeToDirty.bind(null,q.getOwnerComponent(),i));}else if(J1.context&&(!J1.actionContext||J1.actionContext&&J1.context.getPath()!==J1.actionContext.getPath())){r.oApplication.getBusyHelper().getUnbusy().then(r.oViewDependencyHelper.setMeToDirty.bind(null,q.getOwnerComponent(),i));}}});},Function.prototype,"Proceed",undefined,false);},checkToolbarIntentsSupported:D1,executeIfControlReady:E1,getControlInformation:z,executeForAllInformationObjects:A,invokeActionsForExtensionAPI:F1,isContextEditable:c1,setExternalChevronRefreshBehaviour:G1,setComponentRefreshBehaviour:H1,getControlStateWrapper:w.getControlStateWrapper};}return B.extend("sap.suite.ui.generic.template.lib.CommonUtils",{constructor:function(e,i,j){d(this,p(e,i,j));}});});
