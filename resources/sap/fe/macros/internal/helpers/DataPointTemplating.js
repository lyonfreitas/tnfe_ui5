/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2021 SAP SE. All rights reserved
 */
sap.ui.define(["sap/fe/core/formatters/ValueFormatter","sap/fe/core/templating/UIFormatters","sap/fe/core/templating/DataModelPathHelper","sap/fe/core/helpers/BindingExpression","sap/fe/core/templating/PropertyHelper","sap/ui/model/odata/v4/AnnotationHelper"],function(v,U,D,B,P,A){"use strict";var _={};var g=P.getAssociatedUnitPropertyPath;var u=B.unresolveableExpression;var b=B.bindingExpression;var c=B.compileBinding;var f=B.formatResult;var a=B.annotationExpression;var d=D.getPathRelativeLocation;var e=D.enhanceDataModelPath;var h=U.formatWithTypeInformation;var j=U.getBindingWithUnitOrCurrency;var E=U.EDM_TYPE_MAPPING;var k=U.getDisplayMode;function o(i,F){var G=Object.keys(i);if(Object.getOwnPropertySymbols){var H=Object.getOwnPropertySymbols(i);if(F){H=H.filter(function(I){return Object.getOwnPropertyDescriptor(i,I).enumerable;});}G.push.apply(G,H);}return G;}function l(F){for(var i=1;i<arguments.length;i++){var G=arguments[i]!=null?arguments[i]:{};if(i%2){o(Object(G),true).forEach(function(H){m(F,H,G[H]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(F,Object.getOwnPropertyDescriptors(G));}else{o(Object(G)).forEach(function(H){Object.defineProperty(F,H,Object.getOwnPropertyDescriptor(G,H));});}}return F;}function m(i,F,G){if(F in i){Object.defineProperty(i,F,{value:G,enumerable:true,configurable:true,writable:true});}else{i[F]=G;}return i;}var n=function(i){return i!==null&&i!==void 0&&i.TargetValue?a(i.TargetValue):u;};var r=sap.ui.getCore().getLibraryResourceBundle("sap.fe.macros");var p=function(i){var F;var G=(i===null||i===void 0?void 0:(F=i.targetObject)===null||F===void 0?void 0:F.Value)||"";var H=d(i.contextLocation,i.navigationProperties).map(function(Q){return Q.name;});var I=a(G,H);var T=n(i.targetObject);if(I&&T){var J=G!==null&&G!==void 0&&G.$target?g(G===null||G===void 0?void 0:G.$target):undefined;if(!J){var K,L,M,N;var O=(K=G.$target)===null||K===void 0?void 0:(L=K.annotations)===null||L===void 0?void 0:(M=L.Measures)===null||M===void 0?void 0:(N=M.Unit)===null||N===void 0?void 0:N.charAt(0);if(O==="%"){return c(I)+" %";}else{return r.getText("T_COMMON_PROGRESS_INDICATOR_DISPLAY_VALUE_NO_UOM",[c(I),c(T)]);}}else{return r.getText("T_COMMON_PROGRESS_INDICATOR_DISPLAY_VALUE_NO_UOM",[c(I),c(T)])+" "+c(b(J));}}return undefined;};_.progressIndicatorDisplayValue=p;var q=function(i,S){if(S){return s(A.value(S,{context:i}));}};var s=function(S){if(S){var i=S>1?r.getText("T_ANNOTATION_HELPER_RATING_INDICATOR_SUBTITLE_LABEL_PLURAL"):r.getText("T_ANNOTATION_HELPER_RATING_INDICATOR_SUBTITLE_LABEL");return r.getText("T_ANNOTATION_HELPER_RATING_INDICATOR_SUBTITLE",[String(S),i]);}};var t=function(i,F){if(F&&F.SampleSize){return q(i,F.SampleSize);}else if(F&&F.Description){var M=A.value(F.Description,{context:i});return"${path:"+M+"}";}};t.requiresIContext=true;_.getHeaderRatingIndicatorText=t;var w=function(i){var F,G,H;if(i!==null&&i!==void 0&&(F=i.$target)!==null&&F!==void 0&&(G=F.annotations)!==null&&G!==void 0&&(H=G.Common)!==null&&H!==void 0&&H.Text){var I,J,K;var T=a(i===null||i===void 0?void 0:(I=i.$target)===null||I===void 0?void 0:(J=I.annotations)===null||J===void 0?void 0:(K=J.Common)===null||K===void 0?void 0:K.Text);T.parameters={"$$noPatch":true};return T;}return undefined;};var x=function(i,F,N){if(!i.constraints){i.constraints={};}i.constraints=Object.assign(i.constraints,{precision:F.$target.precision,scale:N?N:F.$target.scale});return i;};var y=function(i,F,G,N){var H;var I;var J=(F===null||F===void 0?void 0:(H=F.path)===null||H===void 0?void 0:H.indexOf("/"))===-1?d(i.contextLocation,i.navigationProperties).map(function(M){return M.name;}):[];I=a(F,J);var K=i.targetObject;if(G){var L;h(K,I);I.type=(L=E[G])===null||L===void 0?void 0:L.type;}switch(G){case"Edm.Decimal":I=x(I,F,N);break;default:}return I;};var z=function(i,F,G,M){var H,I,J,K,L,N,O;var Q=i.targetObject;var R=(Q===null||Q===void 0?void 0:Q.Value)||"";var S=F.formatOptions;var T=w(R);var V=R===null||R===void 0?void 0:(H=R.$target)===null||H===void 0?void 0:H.type;var W;if(V==="Edm.Decimal"&&Q.ValueFormat){if(Q.ValueFormat.NumberOfFractionalDigits){W=Q.ValueFormat.NumberOfFractionalDigits;}}var X=e(i,R.path);var Y=y(X,R,V,W);var Z=T?S.displayMode||k(R,X):"Value";var $;switch(Z){case"Description":$=T;break;case"ValueDescription":$=f([Y,T],v.formatWithBrackets);break;case"DescriptionValue":$=f([T,Y],v.formatWithBrackets);break;default:if((I=X.targetObject)!==null&&I!==void 0&&(J=I.annotations)!==null&&J!==void 0&&(K=J.Measures)!==null&&K!==void 0&&K.Unit||(L=X.targetObject)!==null&&L!==void 0&&(N=L.annotations)!==null&&N!==void 0&&(O=N.Measures)!==null&&O!==void 0&&O.ISOCurrency){$=j(X,Y);if($&&M&&(G===null||G===void 0?void 0:G.measureDisplayMode)!=="ReadOnly"){$.formatOptions=l(l({},$.formatOptions),{},{showMeasure:false});}}else{$=Y;}}return c($);};_.buildFieldBindingExpression=z;var C=function(i){var F;var G=(i===null||i===void 0?void 0:(F=i.targetObject)===null||F===void 0?void 0:F.Value)||"";var H=d(i.contextLocation,i.navigationProperties).map(function(M){return M.name;});var I=a(G,H);var T=n(i.targetObject);var J=G!==null&&G!==void 0&&G.$target?g(G.$target):undefined;var K=J?b(J):"";var L=f([I,T,K],v.computePercentage);return c(L);};_.buildExpressionForProgressIndicatorPercentValue=C;return _;},false);
