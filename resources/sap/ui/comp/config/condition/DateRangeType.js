/*
 * ! SAPUI5
 * (c) Copyright 2009-2021 SAP SE. All rights reserved.
 */
sap.ui.define(["sap/ui/thirdparty/jquery",'sap/ui/comp/config/condition/Type','sap/ui/Device','sap/ui/core/library','sap/m/library','sap/m/Input','sap/m/DatePicker','sap/m/Text','sap/m/Select','sap/ui/core/ListItem','sap/m/Label','sap/ui/core/date/UniversalDate','sap/ui/core/format/DateFormat','sap/ui/core/Locale','sap/ui/core/LocaleData','sap/ui/model/type/Integer','sap/ui/model/Sorter','sap/ui/model/Filter',"sap/base/Log","sap/ui/core/date/UniversalDateUtils","sap/m/DynamicDateRange","sap/m/DynamicDateUtil","sap/m/DynamicDateFormat","sap/m/CustomDynamicDateOption",'sap/m/DynamicDateValueHelpUIType',"sap/m/StandardDynamicDateOption",'sap/base/util/UriParameters',"sap/ui/dom/jquery/cursorPos"],function(q,T,D,c,l,I,a,b,S,L,d,U,e,f,g,h,m,j,k,o,p,r,t,C,u,v,w){"use strict";var V=c.ValueState;var P=l.PlacementType;var x=l.StandardDynamicDateRangeKeys.concat(["LAST2WEEKS","LAST3WEEKS","LAST4WEEKS","LAST5WEEKS","NEXT2WEEKS","NEXT3WEEKS","NEXT4WEEKS","NEXT5WEEKS"]);var R;var y;var B;var N=h.extend("sap.ui.model.type.NullableInteger",{parseValue:function(i,s){if(this.getPrimitiveType(s)=="string"){if(i===""){return null;}}return h.prototype.parseValue.apply(this,arguments);}});var z=T.extend("sap.ui.comp.config.condition.DateRangeType",{constructor:function(F,i,n){T.apply(this,[F,i,n]);this.oDateFormat=i&&i._oDateFormatSettings?i._oDateFormatSettings:{UTC:true};this._bIgnoreTime=false;this._maxIntValue=10000;this.bMandatory=this.oFieldMetadata?this.oFieldMetadata.isMandatory:false;}});z.prototype.applySettings=function(s){T.prototype.applySettings.apply(this,arguments);if(s&&s.ignoreTime){this._bIgnoreTime=s.ignoreTime;}};z.setStartTime=function(i){i=z.toUniversalDate(i);return o.resetStartTime(i);};z.setEndTime=function(i,n){i=z.toUniversalDate(i);if(!n){return o.resetEndTime(i);}else{return o.resetStartTime(i);}};z.toUniversalDate=function(i){if(i instanceof Date){return U.getInstance(i);}if(!i){return U.getInstance();}if(!(i instanceof U)){return z.toUniversalDate(new Date(i));}return i;};z.getWeekStartDate=function(i){return o.getWeekStartDate(i);};z.getMonthStartDate=function(i){return o.getMonthStartDate(i);};z.getQuarterStartDate=function(i){return o.getQuarterStartDate(i);};z.getYearStartDate=function(i){return o.getYearStartDate(i);};z.getDateRange=function(i,s,n,E,F){if(n===true){E=true;n=null;}if(!n){n=new U();}else{n=new U(n);}if(E){switch(s){case"DAY":break;case"WEEK":n=o.getWeekStartDate(n);break;case"MONTH":n=o.getMonthStartDate(n);break;case"QUARTER":n=o.getQuarterStartDate(n);break;case"YEAR":n=o.getYearStartDate(n);break;}}if(!F&&i>0){if(i!==0&&!isNaN(i)){var G=-1;switch(s){case"DAY":n.setDate(n.getDate()+G);break;case"WEEK":n.setDate(n.getDate()+(G*7));break;case"MONTH":n.setMonth(n.getMonth()+G);break;case"QUARTER":n.setMonth(n.getMonth()+(G*3));break;case"YEAR":n.setFullYear(n.getFullYear()+G);break;}}}return o.getRange(i,s,n,false);};z.getTextField=function(n,E){var s=T._createStableId(n,"text");if(n._oOperationSelect){var F=n._oOperationSelect.getAriaLabelledBy();var G=false;for(var i=0;i<F.length;i++){if(s===F[i]){G=true;break;}}if(!G){n._oOperationSelect.addAriaLabelledBy(s);}}if(E){return new b(s,{text:"{path: '$smartEntityFilter>value1', type:'sap.ui.model.type.Date', formatOptions:"+JSON.stringify({style:n.oDateFormat.style,pattern:n.oDateFormat.pattern})+"} - {path: '$smartEntityFilter>value2', type:'sap.ui.model.type.Date', formatOptions:"+JSON.stringify({style:n.oDateFormat.style,pattern:n.oDateFormat.pattern})+"}"});}else{return new b(s,{text:{path:'$smartEntityFilter>value1',type:'sap.ui.model.type.Date',formatOptions:{style:n.oDateFormat.style,pattern:n.oDateFormat.pattern}}});}};z.getIntField=function(i){return new I(T._createStableId(i,"field"),{ariaLabelledBy:i._oOperationSelect||null,value:{path:"$smartEntityFilter>value1",type:new N({},{minimum:0,maximum:i._maxIntValue})},textAlign:"End",width:"100%"});};z.getIntFromToField=function(i,n,O){var s=new d({text:T.getTranslatedText("CONDITION_DATERANGETYPE_DATERANGE_LABELFROM")});s.addStyleClass("sapUiCompFilterBarCTPaddingTop");n.push(s);var E=i._createIntFromToControl(i,"fieldFrom","value1");s.setLabelFor(E);n.push(E);s=new d({text:T.getTranslatedText("CONDITION_DATERANGETYPE_DATERANGE_LABELTO")});s.addStyleClass("sapUiCompFilterBarCTPaddingTop");n.push(s);var F=i._createIntFromToControl(i,"fieldTo","value2");s.setLabelFor(F);n.push(F);i._setIntControlBinding(E,O,"value1");i._setIntControlBinding(F,O,"value2");};z.ControlFactory=function(i,n,O){if(O.type==="range"){var s=z.getTextField(i,O.display!=="start");s.addStyleClass("sapUiCompFilterBarCTPaddingTop");n.push(s);return;}if(O.type==="int"){var s=z.getIntField(i);n.push(s);if(O.descriptionTextKeys){s.setFieldWidth("auto");s.bindProperty("description",{path:"$smartEntityFilter>value1",type:"sap.ui.model.type.Integer",formatter:function(){var E=O.descriptionTextKeys[0];var F=O.descriptionTextKeys[1];if(this.getBinding("description").getValue()===1){return T.getTranslatedText(E);}else{return T.getTranslatedText(F||E);}}});}}if(O.type==="[int,int]"){z.getIntFromToField(i,n,O);}};z._defaultOnChangeHandler=function(s,i){if(s.toLowerCase()===this.languageText.toLowerCase()){i.oModel.setProperty("/condition/operation",this.key);i.oModel.setProperty("inputstate","NONE",i.getContext());if(this.category.indexOf("FIXED")!==0){i.oModel.setProperty("inputstate","ERROR",i.getContext());}return true;}return false;};z._IntOnChangeHandler=function(s,i){if(this.basicLanguageText.indexOf("{0}")>=0){var n=new RegExp(this.basicLanguageText.replace("+","\\+").replace("{0}","([a-zA-Z0-9_]+)")+"$",'i');if(s.match(n)){var s=s.match(n)[1];if(s){var E=parseInt(s);if(!isNaN(E)&&E<=i._maxIntValue){i.oModel.setProperty("/condition/operation",this.key);i.oModel.setProperty("/condition/value1",E);i.oModel.setProperty("inputstate","NONE",i.getContext());}else{i.oModel.setProperty("inputstate","ERROR",i.getContext());}return true;}}}return false;};z._IntFromToOnChangeHandler=function(s,i){if(this.basicLanguageText.indexOf("- {0}")>=0&&this.basicLanguageText.indexOf("+ {1}")>=0){var n=new RegExp(this.basicLanguageText.replace("/","\\/").replace("- {0}","(\\- (\\()?((-)?([a-zA-Z0-9_]+))(\\))?)").replace("+ {1}","(\\+ (\\()?((-)?([a-zA-Z0-9_]+))(\\))?)")+"$",'i');var E=s.match(n);if(E){var F=E[3];var G=E[9];if(F&&G){var H=parseInt(F);var J=parseInt(G);if(i._isValidFromToPeriod(H,J)){i.oModel.setProperty("/condition/operation",this.key);i.oModel.setProperty("/condition/value1",H);i.oModel.setProperty("/condition/value2",J);i.oModel.setProperty("inputstate","NONE",i.getContext());}else{i.oModel.setProperty("inputstate","ERROR",i.getContext());}return true;}}}return false;};z._DateOnChangeHandler=function(i,n){if(i.toLowerCase().indexOf(this.languageText.toLowerCase())===0){var s=i.slice(this.languageText.length);if(s.length>0&&s[0]===" "){s=s.trim();if(s[0]==="("&&s[s.length-1]===")"){s=s.slice(1,s.length-1);}var E=n._getDateFormatter(true);var F=E.parse(s);if(F){n.oModel.setProperty("/condition/operation",this.key);n.oModel.setProperty("/condition/value1",F);n.oModel.setProperty("inputstate","NONE",n.getContext());}else{n.oModel.setProperty("inputstate","ERROR",n.getContext());}return true;}}return false;};z._DateWithDefaultsOnChangeHandler=function(s,i){var n,E,F,G,H,J=s.toLowerCase().indexOf(this.languageText.toLowerCase())===0;if(J){n=i._getDateFormatter(true);E=typeof this.defaultValues==="function"&&this.defaultValues();F=E[0]&&E[0].oDate;if(s.indexOf(this.languageText+" ")===0){G=s.slice(this.languageText.length+1);if(G[0]==="("&&G[G.length-1]===")"){G=G.slice(1,G.length-1);}}H=n.parse(G);if(H instanceof Date&&H.getTime()!==F.getTime()){return false;}}return z._DateOnChangeHandler.apply(this,arguments);};z._DateRangeOnChangeHandler=function(i,n){if(i.toLowerCase().indexOf(this.languageText.toLowerCase())===0){var s=i.slice(this.languageText.length).trim();if(s[0]==="("&&s[s.length-1]===")"){s=s.slice(1,s.length-1);}var E=s.split("-")[0];var F=s.split("-")[1];var G=n._getDateFormatter(true);var H=G.parse(E);var J=G.parse(F);if(H&&J){n.oModel.setProperty("/condition/operation",this.key);n.oModel.setProperty("/condition/value1",H);n.oModel.setProperty("/condition/value2",J);n.oModel.setProperty("inputstate","NONE",n.getContext());}else{n.oModel.setProperty("inputstate","ERROR",n.getContext());}return true;}return false;};z._MonthOnChangeHandler=function(s,i){var M;var n=false;if(s.toLowerCase().indexOf(this.languageText.toLowerCase())===0){M=s.slice(this.languageText.length).trim();if(M.indexOf("(")==0){M=M.slice(1);M=M.slice(0,M.length-1);}n=true;}else{M=s;}var E=this.getValueList();var F=-1;E.some(function(G,H){var n=G.text.toLowerCase()===M.toLowerCase();if(n){F=H;}return n;});if(F>-1){i.oModel.setProperty("/condition/operation",this.key);i.oModel.setProperty("/condition/value1",F);i.oModel.setProperty("inputstate","NONE",i.getContext());return true;}else{if(n){i.oModel.setProperty("inputstate","ERROR",i.getContext());}return n;}};z._DefaultFilterSuggestItem=function(s,n,E){var M=false;if(this.languageText.toLowerCase().startsWith(s.toLowerCase())){M=true;}else{var W=this.languageText.split(" ");for(var i=0;i<W.length;i++){var F=W[i];if(F.toLowerCase().startsWith(s.toLowerCase())){M=true;}}}n.setAdditionalText(this.textValue);n.setText(this.languageText);return M;};z._HideFilterSuggestItem=function(s,i,n){return false;};z._IntFilterSuggestItem=function(s,i,n){if(!this.basicLanguageText){this.basicLanguageText=n.basicLanguageText;}if(!this.basicLanguageText){this.basicLanguageText=this.languageText||T.getTranslatedText(this.textKey);}var E=this.basicLanguageText.indexOf("{0}");var F;var G;if(E>=0){F=this.basicLanguageText.slice(0,E).trim();G=this.basicLanguageText.slice(E+3).trim();}var H=s.split(" ");if(H.length<1||H.length>3){return false;}var M=false;var J;var K=function(s){return!!s.match(/(^[0-9]+$)/)&&parseInt(s)>=0;};if(F.toLowerCase().startsWith(H[0].toLowerCase())){if(H[1]){if(K(H[1])){J=H[1];if(H[2]){if(G.toLowerCase().startsWith(H[2].toLowerCase())){M=true;}}else{M=true;}}}else{M=true;}}else if(K(H[0])&&H.length<3){J=H[0];if(H[1]){if(G.toLowerCase().startsWith(H[1].toLowerCase())){M=true;}}else{M=true;}}else if(G.toLowerCase().startsWith(H[0].toLowerCase())&&H.length==1){M=true;}if(M&&J){var O;switch(this.category){case"DYNAMIC.DATE.INT":O="DAY";break;case"DYNAMIC.WEEK.INT":O="WEEK";break;case"DYNAMIC.MONTH.INT":O="MONTH";break;case"DYNAMIC.QUARTER.INT":O="QUARTER";break;case"DYNAMIC.YEAR.INT":O="YEAR";break;default:O="DAY";break;}var Q=parseInt(J),W=true;if(!n._maxIntValue){n._maxIntValue=n.getControls(n.key)[0].getBindingInfo('value').type.oConstraints.maximum;}if(Q>n._maxIntValue){M=false;}if(this.key.startsWith("LAST")){Q=Q*-1;W=false;}var X;if(this.getDateRange){var Y=this.getDateRange({operation:this.key,value1:Q});X=[Y.value1,Y.value2];}else{X=z.getDateRange(Q,O,true,W,W);}var Z=n._getDateFormatter(true);if(Math.abs(Q)===1&&this.singulareBasicLanguageText){i.setText(this.singulareBasicLanguageText);if(O!=="DAY"){i.setAdditionalText(Z.format(X[0])+" - "+Z.format(X[1]));}else{i.setAdditionalText(Z.format(X[0]));}}else{i.setText(n._fillNumberToText(this.basicLanguageText,J));i.setAdditionalText(Z.format(X[0])+" - "+Z.format(X[1]));}i._value1=parseInt(J);}else{i.setAdditionalText(null);i.setText(this.languageText);i._value1=null;}return M;};z._IntFromToFilterSuggestItem=function(s,i,n){var E=new RegExp("(\\- ([0-9]+))",'i'),F=new RegExp("(\\+ ([0-9]+))",'i'),G=new RegExp("(\\- ((\\(-)?([0-9]+)(\\)))?)",'i'),H=new RegExp("(\\+ ((\\(-)?([0-9]+)(\\)))?)",'i'),J=s.match(E),K=s.match(F),M=s.match(G),O=s.match(H);if((!J&&!M)||(!K&&!O)){i.setAdditionalText(null);i.setText(this.languageText);i._value1=null;i._value2=null;return false;}var Q=function(a1,b1){if(a1&&!isNaN(a1[2])){return parseInt(a1[2]);}else if(b1&&b1[2]){var s=b1[2].replace("(","").replace(")","");if(!isNaN(s)){return parseInt(s);}}return null;},W,X;W=Q(J,M);X=Q(K,O);if(!n._isValidFromToPeriod(W,X)){i.setAdditionalText(null);i.setText(this.languageText);i._value1=null;i._value2=null;return false;}var Y=n._getDateFormatter(true),Z,$;Z=n._getTodayFromToValueFrom(W);$=n._getTodayFromToValueTo(X);i.setText(n._fillNumberToText(this.basicLanguageText,W,X));i.setAdditionalText(Y.format(Z)+" - "+Y.format($));i._value1=W;i._value2=X;return true;};z._DateFilterSuggestItem=function(s,i,n){var E=n._getDateFormatter(true);var F=E.parse(s);if(F){i.setText(this.languageText+" ("+E.format(F)+")");i._value1=F;return true;}else{i.setText(this.languageText);i._value1=null;return false;}};z._DateRangeFilterSuggestItem=function(s,i,n){var E=n._getDateFormatter(true);var F,G;var H="-";var J=false;var K=s.split(H);if(K.length===2){if(K[0].slice(K[0].length-1,K[0].length)==" "){K[0]=K[0].slice(0,K[0].length-1);}if(K[1].slice(0,1)==" "){K[1]=K[1].slice(1);}}else{K=s.split(" "+H+" ");}if(K.length<2){var M=s.split(" ");if(M.length===2){K=M;}}if(K.length>=1&&K.length<=2){F=E.parse(K[0]);if(F){i._value1=F;if(K.length==2&&K[1]===""){K.splice(1,1);}if(K.length==2){G=E.parse(K[1]);if(G){i._value2=G;J=true;i.setText(this.languageText+" ("+E.format(F)+" "+H+" "+E.format(G)+")");}}else{J=true;i.setText(this.languageText+" ("+E.format(F)+" "+H+")");}}}if(!J){i.setText(this.languageText);i._value1=null;i._value2=null;}return J;};z._MonthFilterSuggestItem=function(s,n,E){var M=false;n._value1=null;var F=this.getValueList();for(var i=0;i<F.length;i++){var G=F[i];M=G.text.toLowerCase().startsWith(s.toLowerCase());if(M){n.setText(this.languageText+" ("+G.text+")");n._value1=i;break;}}return M;};z._DefaultOnItemSelected=function(s,i,n){n.oModel.setProperty("/condition/operation",this.key);if("value1"in this){n.oModel.setProperty("/condition/value1",i._value1);}if("value2"in this){n.oModel.setProperty("/condition/value2",i._value2);}n.oModel.setProperty("inputstate","NONE",n.getContext());n._bSuggestItemSelected=true;};z._IntOnItemSelected=function(s,i,n){var E=i._value1;n.oModel.setProperty("/condition/operation",this.key);n.oModel.setProperty("/condition/value1",E);n.oModel.setProperty("inputstate","NONE",n.getContext());n._bSuggestItemSelected=true;};z._IntOnItemsSelected=function(s,i,n){var E=i._value1;var F=i._value2;n.oModel.setProperty("/condition/operation",this.key);n.oModel.setProperty("/condition/value1",E);n.oModel.setProperty("/condition/value2",F);n.oModel.setProperty("inputstate","NONE",n.getContext());n._bSuggestItemSelected=true;};z.getFixedRangeOperation=function(K,s,i,n,F,O){return{key:K,textKey:s,category:i,order:O||100,defaultValues:n||null,type:"range",display:"range",filterSuggestItem:F||z._DefaultFilterSuggestItem,onItemSelected:z._DefaultOnItemSelected,getControls:z.ControlFactory};};z.createSingleIntRangeOperation=function(K,s,i,n,E,F,O,Z){return{key:K,textKey:s,singularTextKey:i,zeroNumberTextKey:Z,category:n,order:O,defaultValues:[E],value1:null,type:"int",descriptionTextKeys:F,onChange:z._IntOnChangeHandler,filterSuggestItem:z._IntFilterSuggestItem,onItemSelected:z._IntOnItemSelected,getControls:z.ControlFactory,_getInitialValues:function(G){return[G.value1,G.value2];}};};z.Operations={DATERANGE:{key:"DATERANGE",textKey:"CONDITION_DATERANGETYPE_DATERANGE",category:"DYNAMIC.DATERANGE",order:2,defaultOperation:true,defaultValues:[null,null],value1:null,value2:null,onChange:z._DateRangeOnChangeHandler,filterSuggestItem:z._DateRangeFilterSuggestItem,onItemSelected:z._DefaultOnItemSelected,getControls:function(i,n){var s=false,E=false,F=new d({text:T.getTranslatedText("CONDITION_DATERANGETYPE_DATERANGE_LABELFROM")});F.addStyleClass("sapUiCompFilterBarCTPaddingTop");n.push(F);var G=new a(T._createStableId(i,"field1"),{dateValue:{path:"$smartEntityFilter>value1"},maxDate:{path:"$smartEntityFilter>value2"},displayFormat:i.oDateFormat.style||i.oDateFormat.pattern||"",change:function(J){var K=J.getSource(),M=J.getParameter("valid");K.setValueState(M?V.None:V.Error);if(!s){s=true;K.getBinding("maxDate").attachChange(function(J){i.datePickerValidateLastValue(K);});}}});F.setLabelFor(G);n.push(G);F=new d({text:T.getTranslatedText("CONDITION_DATERANGETYPE_DATERANGE_LABELTO")});F.addStyleClass("sapUiCompFilterBarCTPaddingTop");n.push(F);var H=new a(T._createStableId(i,"field2"),{dateValue:{path:"$smartEntityFilter>value2"},minDate:{path:"$smartEntityFilter>value1"},displayFormat:i.oDateFormat.style||i.oDateFormat.pattern||"",change:function(J){var K=J.getSource(),M=J.getParameter("valid");K.setValueState(M?V.None:V.Error);if(!E){E=true;K.getBinding("minDate").attachChange(function(J){i.datePickerValidateLastValue(K);});}}});F.setLabelFor(H);n.push(H);}},DATE:{key:"DATE",textKey:"CONDITION_DATERANGETYPE_DATE",category:"DYNAMIC.DATE",order:0,defaultValues:[null],value1:null,onChange:z._DateOnChangeHandler,filterSuggestItem:z._DateFilterSuggestItem,onItemSelected:z._DefaultOnItemSelected,getControls:function(i,n){var s=new a(T._createStableId(i,"field"),{ariaLabelledBy:i._oOperationSelect||null,dateValue:{path:"$smartEntityFilter>value1"},displayFormat:i.oDateFormat.style||i.oDateFormat.pattern||"",change:function(E){var F=E.getParameter("valid");if(F){this.getModel("$smartEntityFilter").setProperty("inputstate","NONE",this.getModel("$smartEntityFilter").getContext("/"));}else{this.getModel("$smartEntityFilter").setProperty("inputstate","ERROR",this.getModel("$smartEntityFilter").getContext("/"));}}});n.push(s);}},FROM:{key:"FROM",textKey:"CONDITION_DATERANGETYPE_FROM",category:"DYNAMIC.DATE",order:0,defaultValues:[null],value1:null,onChange:z._DateOnChangeHandler,filterSuggestItem:z._DateFilterSuggestItem,onItemSelected:z._DefaultOnItemSelected,getControls:function(i,n){var s=new a(T._createStableId(i,"field"),{ariaLabelledBy:i._oOperationSelect||null,dateValue:{path:"$smartEntityFilter>value1"},displayFormat:i.oDateFormat.style||i.oDateFormat.pattern||"",change:function(E){var F=E.getParameter("valid");if(F){this.getModel("$smartEntityFilter").setProperty("inputstate","NONE",this.getModel("$smartEntityFilter").getContext("/"));}else{this.getModel("$smartEntityFilter").setProperty("inputstate","ERROR",this.getModel("$smartEntityFilter").getContext("/"));}}});n.push(s);}},TO:{key:"TO",textKey:"CONDITION_DATERANGETYPE_TO",category:"DYNAMIC.DATE",order:1,defaultValues:[null],value1:null,onChange:z._DateOnChangeHandler,filterSuggestItem:z._DateFilterSuggestItem,onItemSelected:z._DefaultOnItemSelected,getControls:function(i,n,O){var s=new a(T._createStableId(i,"field"),{ariaLabelledBy:i._oOperationSelect||null,dateValue:{path:"$smartEntityFilter>value1"},displayFormat:i.oDateFormat.style||i.oDateFormat.pattern||"",change:function(E){var F=E.getParameter("valid");if(F){this.getModel("$smartEntityFilter").setProperty("inputstate","NONE",this.getModel("$smartEntityFilter").getContext("/"));}else{this.getModel("$smartEntityFilter").setProperty("inputstate","ERROR",this.getModel("$smartEntityFilter").getContext("/"));}}});n.push(s);}},LASTDAYS:z.createSingleIntRangeOperation("LASTDAYS","CONDITION_DATERANGETYPE_LASTDAYS","CONDITION_DATERANGETYPE_YESTERDAY","DYNAMIC.DATE.INT",1,["CONDITION_DATERANGETYPE_SINGLE_DAY","CONDITION_DATERANGETYPE_MULTIPLE_DAYS"],4,"CONDITION_DATERANGETYPE_TODAY"),LASTWEEKS:z.createSingleIntRangeOperation("LASTWEEKS","CONDITION_DATERANGETYPE_LASTWEEKS","CONDITION_DATERANGETYPE_LASTWEEK","DYNAMIC.WEEK.INT",1,["CONDITION_DATERANGETYPE_SINGLE_WEEK","CONDITION_DATERANGETYPE_MULTIPLE_WEEKS"],8,"CONDITION_DATERANGETYPE_THISWEEK"),LASTMONTHS:{key:"LASTMONTHS",textKey:"CONDITION_DATERANGETYPE_LASTMONTHS",singularTextKey:"CONDITION_DATERANGETYPE_LASTMONTH",zeroNumberTextKey:"CONDITION_DATERANGETYPE_THISMONTH",category:"DYNAMIC.MONTH.INT",order:14,defaultValues:[1],value1:null,type:"int",descriptionTextKeys:["CONDITION_DATERANGETYPE_SINGLE_MONTH","CONDITION_DATERANGETYPE_MULTIPLE_MONTHS"],onChange:z._IntOnChangeHandler,filterSuggestItem:z._IntFilterSuggestItem,onItemSelected:z._IntOnItemSelected,getControls:z.ControlFactory},LASTQUARTERS:{key:"LASTQUARTERS",textKey:"CONDITION_DATERANGETYPE_LASTQUARTERS",singularTextKey:"CONDITION_DATERANGETYPE_LASTQUARTER",zeroNumberTextKey:"CONDITION_DATERANGETYPE_THISQUARTER",category:"DYNAMIC.QUARTER.INT",order:19,defaultValues:[1],value1:null,type:"int",descriptionTextKeys:["CONDITION_DATERANGETYPE_SINGLE_QUARTER","CONDITION_DATERANGETYPE_MULTIPLE_QUARTERS"],onChange:z._IntOnChangeHandler,filterSuggestItem:z._IntFilterSuggestItem,onItemSelected:z._IntOnItemSelected,getControls:z.ControlFactory},LASTYEARS:{key:"LASTYEARS",textKey:"CONDITION_DATERANGETYPE_LASTYEARS",singularTextKey:"CONDITION_DATERANGETYPE_LASTYEAR",zeroNumberTextKey:"CONDITION_DATERANGETYPE_THISYEAR",category:"DYNAMIC.YEAR.INT",order:28,defaultValues:[1],value1:null,type:"int",descriptionTextKeys:["CONDITION_DATERANGETYPE_SINGLE_YEAR","CONDITION_DATERANGETYPE_MULTIPLE_YEARS"],onChange:z._IntOnChangeHandler,filterSuggestItem:z._IntFilterSuggestItem,onItemSelected:z._IntOnItemSelected,getControls:z.ControlFactory},NEXTDAYS:{key:"NEXTDAYS",textKey:"CONDITION_DATERANGETYPE_NEXTDAYS",singularTextKey:"CONDITION_DATERANGETYPE_TOMORROW",zeroNumberTextKey:"CONDITION_DATERANGETYPE_TODAY",category:"DYNAMIC.DATE.INT",order:5,defaultValues:[1],value1:null,type:"int",descriptionTextKeys:["CONDITION_DATERANGETYPE_SINGLE_DAY","CONDITION_DATERANGETYPE_MULTIPLE_DAYS"],onChange:z._IntOnChangeHandler,filterSuggestItem:z._IntFilterSuggestItem,onItemSelected:z._IntOnItemSelected,getControls:z.ControlFactory},NEXTWEEKS:{key:"NEXTWEEKS",textKey:"CONDITION_DATERANGETYPE_NEXTWEEKS",singularTextKey:"CONDITION_DATERANGETYPE_NEXTWEEK",zeroNumberTextKey:"CONDITION_DATERANGETYPE_THISWEEK",category:"DYNAMIC.WEEK.INT",order:10,defaultValues:[1],value1:null,type:"int",descriptionTextKeys:["CONDITION_DATERANGETYPE_SINGLE_WEEK","CONDITION_DATERANGETYPE_MULTIPLE_WEEKS"],onChange:z._IntOnChangeHandler,filterSuggestItem:z._IntFilterSuggestItem,onItemSelected:z._IntOnItemSelected,getControls:z.ControlFactory},NEXTMONTHS:{key:"NEXTMONTHS",textKey:"CONDITION_DATERANGETYPE_NEXTMONTHS",singularTextKey:"CONDITION_DATERANGETYPE_NEXTMONTH",zeroNumberTextKey:"CONDITION_DATERANGETYPE_THISMONTH",category:"DYNAMIC.MONTH.INT",order:16,defaultValues:[1],value1:null,type:"int",descriptionTextKeys:["CONDITION_DATERANGETYPE_SINGLE_MONTH","CONDITION_DATERANGETYPE_MULTIPLE_MONTHS"],onChange:z._IntOnChangeHandler,filterSuggestItem:z._IntFilterSuggestItem,onItemSelected:z._IntOnItemSelected,getControls:z.ControlFactory},NEXTQUARTERS:{key:"NEXTQUARTERS",textKey:"CONDITION_DATERANGETYPE_NEXTQUARTERS",singularTextKey:"CONDITION_DATERANGETYPE_NEXTQUARTER",zeroNumberTextKey:"CONDITION_DATERANGETYPE_THISQUARTER",category:"DYNAMIC.QUARTER.INT",order:21,defaultValues:[1],value1:null,type:"int",descriptionTextKeys:["CONDITION_DATERANGETYPE_SINGLE_QUARTER","CONDITION_DATERANGETYPE_MULTIPLE_QUARTERS"],onChange:z._IntOnChangeHandler,filterSuggestItem:z._IntFilterSuggestItem,onItemSelected:z._IntOnItemSelected,getControls:z.ControlFactory},NEXTYEARS:{key:"NEXTYEARS",textKey:"CONDITION_DATERANGETYPE_NEXTYEARS",singularTextKey:"CONDITION_DATERANGETYPE_NEXTYEAR",zeroNumberTextKey:"CONDITION_DATERANGETYPE_THISYEAR",category:"DYNAMIC.YEAR.INT",order:30,defaultValues:[1],value1:null,type:"int",descriptionTextKeys:["CONDITION_DATERANGETYPE_SINGLE_YEAR","CONDITION_DATERANGETYPE_MULTIPLE_YEARS"],onChange:z._IntOnChangeHandler,filterSuggestItem:z._IntFilterSuggestItem,onItemSelected:z._IntOnItemSelected,getControls:z.ControlFactory},SPECIFICMONTH:{key:"SPECIFICMONTH",textKey:"CONDITION_DATERANGETYPE_SPECIFICMONTH",category:"DYNAMIC.MONTH",order:11,defaultValues:function(){var i=new U();return[i.getMonth()];},value1:null,onChange:z._MonthOnChangeHandler,onItemSelected:z._DefaultOnItemSelected,filterSuggestItem:z._MonthFilterSuggestItem,getControls:function(i,n,O){var s=new S(T._createStableId(i,"field"),{ariaLabelledBy:i._oOperationSelect||null,width:"100%",selectedKey:{path:"$smartEntityFilter>value1",type:"sap.ui.model.type.Integer"}});s.bindAggregation("items",{path:"$smartEntityFilter>/currentoperation/valueList",template:new L({text:{path:"$smartEntityFilter>text"},key:{path:"$smartEntityFilter>key"}}),templateShareable:false});n.push(s);},getValueList:function(){var n=new U(),M=[],F=e.getDateInstance({pattern:"LLLL"});n.setDate(15);n.setMonth(0);for(var i=0;i<12;i++){M.push({text:F.format(n),key:i});n.setMonth(n.getMonth()+1);}return M;}},YESTERDAY:{key:"YESTERDAY",textKey:"CONDITION_DATERANGETYPE_YESTERDAY",category:"FIXED.DATE",order:3.1,defaultValues:function(){return o.ranges.yesterday();},type:"range",display:"start",onChange:z._DateWithDefaultsOnChangeHandler,onItemSelected:z._DefaultOnItemSelected,getControls:z.ControlFactory},TODAY:{key:"TODAY",textKey:"CONDITION_DATERANGETYPE_TODAY",category:"FIXED.DATE",order:3,defaultValues:function(){return o.ranges.today();},type:"range",display:"start",onChange:z._DateWithDefaultsOnChangeHandler,onItemSelected:z._DefaultOnItemSelected,getControls:z.ControlFactory},TOMORROW:{key:"TOMORROW",textKey:"CONDITION_DATERANGETYPE_TOMORROW",category:"FIXED.DATE",order:3.2,defaultValues:function(){var i=o.ranges.tomorrow();return i;},type:"range",display:"start",onChange:z._DateWithDefaultsOnChangeHandler,onItemSelected:z._DefaultOnItemSelected,getControls:z.ControlFactory},THISWEEK:z.getFixedRangeOperation("THISWEEK","CONDITION_DATERANGETYPE_THISWEEK","FIXED.WEEK",function(){return o.ranges.currentWeek();},z._DefaultFilterSuggestItem,6),LASTWEEK:z.getFixedRangeOperation("LASTWEEK","CONDITION_DATERANGETYPE_LASTWEEK","FIXED.WEEK",function(){return o.ranges.lastWeek();},z._DefaultFilterSuggestItem,7),LAST2WEEKS:z.getFixedRangeOperation("LAST2WEEKS","CONDITION_DATERANGETYPE_LAST2WEEKS","FIXED.WEEK",function(){return o.ranges.lastWeeks(-2);},z._HideFilterSuggestItem,-1),LAST3WEEKS:z.getFixedRangeOperation("LAST3WEEKS","CONDITION_DATERANGETYPE_LAST3WEEKS","FIXED.WEEK",function(){return o.ranges.lastWeeks(-3);},z._HideFilterSuggestItem,-1),LAST4WEEKS:z.getFixedRangeOperation("LAST4WEEKS","CONDITION_DATERANGETYPE_LAST4WEEKS","FIXED.WEEK",function(){return o.ranges.lastWeeks(-4);},z._HideFilterSuggestItem,-1),LAST5WEEKS:z.getFixedRangeOperation("LAST5WEEKS","CONDITION_DATERANGETYPE_LAST5WEEKS","FIXED.WEEK",function(){return o.ranges.lastWeeks(-5);},z._HideFilterSuggestItem,-1),NEXTWEEK:z.getFixedRangeOperation("NEXTWEEK","CONDITION_DATERANGETYPE_NEXTWEEK","FIXED.WEEK",function(){return o.ranges.nextWeek();},z._DefaultFilterSuggestItem,9),NEXT2WEEKS:z.getFixedRangeOperation("NEXT2WEEKS","CONDITION_DATERANGETYPE_NEXT2WEEKS","FIXED.WEEK",function(){return o.ranges.nextWeeks(2);},z._HideFilterSuggestItem,-1),NEXT3WEEKS:z.getFixedRangeOperation("NEXT3WEEKS","CONDITION_DATERANGETYPE_NEXT3WEEKS","FIXED.WEEK",function(){return o.ranges.nextWeeks(3);},z._HideFilterSuggestItem,-1),NEXT4WEEKS:z.getFixedRangeOperation("NEXT4WEEKS","CONDITION_DATERANGETYPE_NEXT4WEEKS","FIXED.WEEK",function(){return o.ranges.nextWeeks(4);},z._HideFilterSuggestItem,-1),NEXT5WEEKS:z.getFixedRangeOperation("NEXT5WEEKS","CONDITION_DATERANGETYPE_NEXT5WEEKS","FIXED.WEEK",function(){return o.ranges.nextWeeks(5);},z._HideFilterSuggestItem,-1),THISMONTH:z.getFixedRangeOperation("THISMONTH","CONDITION_DATERANGETYPE_THISMONTH","FIXED.MONTH",function(){return o.ranges.currentMonth();},z._DefaultFilterSuggestItem,12),LASTMONTH:z.getFixedRangeOperation("LASTMONTH","CONDITION_DATERANGETYPE_LASTMONTH","FIXED.MONTH",function(){return o.ranges.lastMonth();},z._DefaultFilterSuggestItem,13),NEXTMONTH:z.getFixedRangeOperation("NEXTMONTH","CONDITION_DATERANGETYPE_NEXTMONTH","FIXED.MONTH",function(){return o.ranges.nextMonth();},z._DefaultFilterSuggestItem,15),THISQUARTER:z.getFixedRangeOperation("THISQUARTER","CONDITION_DATERANGETYPE_THISQUARTER","FIXED.QUARTER",function(){return o.ranges.currentQuarter();},z._DefaultFilterSuggestItem,17),LASTQUARTER:z.getFixedRangeOperation("LASTQUARTER","CONDITION_DATERANGETYPE_LASTQUARTER","FIXED.QUARTER",function(){return o.ranges.lastQuarter();},z._DefaultFilterSuggestItem,18),NEXTQUARTER:z.getFixedRangeOperation("NEXTQUARTER","CONDITION_DATERANGETYPE_NEXTQUARTER","FIXED.QUARTER",function(){return o.ranges.nextQuarter();},z._DefaultFilterSuggestItem,20),YEARTODATE:z.getFixedRangeOperation("YEARTODATE","CONDITION_DATERANGETYPE_YEARTODATE","FIXED.YEAR",function(){return o.ranges.yearToDate();},z._DefaultFilterSuggestItem,31),THISYEAR:z.getFixedRangeOperation("THISYEAR","CONDITION_DATERANGETYPE_THISYEAR","FIXED.YEAR",function(){return o.ranges.currentYear();},z._DefaultFilterSuggestItem,26),LASTYEAR:z.getFixedRangeOperation("LASTYEAR","CONDITION_DATERANGETYPE_LASTYEAR","FIXED.YEAR",function(){return o.ranges.lastYear();},z._DefaultFilterSuggestItem,27),NEXTYEAR:z.getFixedRangeOperation("NEXTYEAR","CONDITION_DATERANGETYPE_NEXTYEAR","FIXED.YEAR",function(){return o.ranges.nextYear();},z._DefaultFilterSuggestItem,29),QUARTER1:z.getFixedRangeOperation("QUARTER1","CONDITION_DATERANGETYPE_QUARTER1","FIXED.QUARTER",function(){return o.ranges.quarter(1);},z._DefaultFilterSuggestItem,22),QUARTER2:z.getFixedRangeOperation("QUARTER2","CONDITION_DATERANGETYPE_QUARTER2","FIXED.QUARTER",function(){return o.ranges.quarter(2);},z._DefaultFilterSuggestItem,23),QUARTER3:z.getFixedRangeOperation("QUARTER3","CONDITION_DATERANGETYPE_QUARTER3","FIXED.QUARTER",function(){return o.ranges.quarter(3);},z._DefaultFilterSuggestItem,24),QUARTER4:z.getFixedRangeOperation("QUARTER4","CONDITION_DATERANGETYPE_QUARTER4","FIXED.QUARTER",function(){return o.ranges.quarter(4);},z._DefaultFilterSuggestItem,25),TODAYFROMTO:{key:"TODAYFROMTO",textKey:"CONDITION_DATERANGETYPE_TODAYFROMTO",singularTextKey:"CONDITION_DATERANGETYPE_TODAYFROMTO",category:"DYNAMIC.DATE.INT",order:3.3,defaultValues:[1,1],type:"[int,int]",display:"int",value1:null,value2:null,descriptionTextKeys:["CONDITION_DATERANGETYPE_SINGLE_DAY","CONDITION_DATERANGETYPE_MULTIPLE_DAYS"],onChange:z._IntFromToOnChangeHandler,filterSuggestItem:z._IntFromToFilterSuggestItem,onItemSelected:z._IntOnItemsSelected,getControls:z.ControlFactory}};z.NewDynamicDateRangeOperations={DATETOYEAR:{key:"DATETOYEAR",category:"FIXED.YEAR",type:"range",display:"range",defaultValues:function(){return new v().toDates({operator:"DATETOYEAR",values:[]});}}};z.prototype.getControls=function(O){var i=[];if(!O){return;}if(!O.getControls){O.getControls=z.ControlFactory;}O.getControls(this,i,O);return i;};z.prototype.setIgnoreTime=function(i){this._bIgnoreTime=i;};T.prototype.getIgnoreTime=function(i){return this._bIgnoreTime;};z.prototype.getDefaultValues=function(O){if(!O){return[];}var i=O.defaultValues||[];if(typeof i==="function"){i=O.defaultValues();}var n=this.getCondition(),s=i[0]||null,E=i[1]||null;if(O.key==="DATERANGE"&&n&&n.value1&&n.value2&&(n.value1 instanceof Date&&n.value2 instanceof Date||n.value1.oDate&&n.value2.oDate)){s=n.value1.oDate||n.value1;E=n.value2.oDate||n.value2;}else{if(s instanceof Date){s=new U(s);}if(E instanceof Date){E=new U(E);}}return[s,E];};z.prototype.getOperations=function(){var O=[];var i=z.Operations;if(this._isNewDynamicDateRangeEnabled()){i=Object.assign({},i,z.NewDynamicDateRangeOperations);}for(var n in i){var s=i[n];if(this._filterOperation(s)){O.push(s);}}return O;};z.prototype._updateOperation=function(O){T.prototype._updateOperation.apply(this,[O]);if(O.languageText&&!O.basicLanguageText){O.basicLanguageText=O.languageText;if(!O.singulareBasicLanguageText&&O.singularTextKey){O.singulareBasicLanguageText=this.getTranslatedText(O.singularTextKey);}if(!O.zeroNumberLanguageText&&O.zeroNumberTextKey){O.zeroNumberLanguageText=this.getTranslatedText(O.zeroNumberTextKey);}O.languageText=this._fillNumberToText(O.languageText);}if(O.display){var i=this.getDefaultValues(O);var n=this._getDateFormatter(false);if(O.display==="start"&&i[0]!==null){O.textValue=n.format(i[0].oDate);}else if(O.display==="range"&&i&&i[0]&&i[1]){O.textValue=n.format(i[0].oDate)+" - "+n.format(i[1].oDate);}}O.suggestText=O.languageText;};z.prototype.isValidCondition=function(){var i=this.getCondition(),O=this.getOperation(i.operation);if(O&&i&&i.key&&i.operation){if("value1"in O&&"value2"in O){return"value1"in i&&i.value1!==null&&"value2"in i&&i.value2!==null;}else if("value1"in O){return"value1"in i&&i.value1!==null;}else if("value2"in O){return"value2"in i&&i.value2!==null;}else if(!("value1"in O)&&!("value2"in O)){return true;}}return false;};z.prototype.hasSemanticDate=function(J){var O=this.getOperations();if(J.ranges[0].semantic&&J.ranges[0].semantic.operation){var i=0;for(i=0;i<O.length;i++){if(O[i].key.indexOf(J.ranges[0].semantic.operation)!==-1){return true;}}return false;}};z.prototype.providerDataUpdated=function(i,n){};z.prototype.initialize=function(J){T.prototype.initialize.apply(this,[J]);this.oModel.suspend();var O=Object.assign({},J,true),s,i;var n=(new U()).getCalendarType();if(!J.conditionTypeInfo){if(J.ranges&&J.ranges.length==1){var E;if(this.hasSemanticDate(J)){E=J.ranges[0].semantic.operation;if(J.ranges[0].semantic.value1||J.ranges[0].semantic.value1==0){s=J.ranges[0].semantic.value1;}if(J.ranges[0].semantic.value2||J.ranges[0].semantic.value2==0){i=J.ranges[0].semantic.value2;}if(this.getDefaultOperation().key===E){var F=this.getOperation(E),G=F&&F._getInitialValues?F._getInitialValues(J):null;if(!G){G=this.getDefaultValues(F);}if((G[0]&&G[0].oDate&&G[0].oDate.toISOString()!==J.ranges[0].value1)||(G[1]&&G[1].oDate&&G[1].oDate.toISOString()!==J.ranges[0].value2)){E="DATERANGE";}}}else{E="DATERANGE";}if(J.ranges[0].operation==="GE"){E="FROM";}if(J.ranges[0].operation==="LE"){E="TO";}J.conditionTypeInfo={name:this.getName(),data:{key:this.sFieldName,operation:E,value1:(s||s==0)?s:J.ranges[0].value1,value2:(i||i==0)?i:J.ranges[0].value2,calendarType:n}};}else{var F=this.getDefaultOperation(),K=F?F.key:"";J.conditionTypeInfo={name:this.getName(),data:{key:this.sFieldName,operation:K,calendarType:n}};}}if(J.conditionTypeInfo){J=J.conditionTypeInfo;}if(J.name&&J.data){if(J.name!==this.getName()){k.debug("ConditionType "+this.getName()+" tries to deserialize data from "+J.name);}J=J.data;}if(!J.operation){return;}if(this.getOperation(J.operation)&&this.getOperation(J.operation).order<0){var H=["LAST2WEEKS","LAST3WEEKS","LAST4WEEKS","LAST5WEEKS"].indexOf(J.operation);if(H>=0){J.operation="LASTWEEKS";J.value1=H+2;}H=["NEXT2WEEKS","NEXT3WEEKS","NEXT4WEEKS","NEXT5WEEKS"].indexOf(J.operation);if(H>=0){J.operation="NEXTWEEKS";J.value1=H+2;}}var M=this.getOperation(J.operation);if(!M){if(this.getAsync()){this.setPending(true);var Q=this,W=function(a1){if(a1.getParameter("pending")===false){Q.oFilterProvider.detachPendingChange(W);Q.initialize(O);}};this.oFilterProvider.attachPendingChange(W);this.oModel.resume();return;}}var X;if(n!==J.calendarType&&(J.calendarType==="Islamic"||n==="Islamic")&&J.operation==="SPECIFICMONTH"){J.operation="DATERANGE";var Y=parseInt(J.value1),Z=U.getInstance(new Date(),J.calendarType);Z.setMonth(Y);Z=o.getMonthStartDate(Z);X=o.getRange(0,"MONTH",Z);J.value1=X[0].oDate.toISOString();J.value2=X[1].oDate.toISOString();}var $=this.getConditionContext().getObject();$.operation=J.operation;$.key=J.key;$.value1=null;$.value2=null;if(J.operation==="DATERANGE"){if(typeof J.value1==="string"){J.value1=J.value1===""?null:(new U(J.value1)).oDate;}if(typeof J.value2==="string"){J.value2=J.value2===""?null:(new U(J.value2)).oDate;}$.value1=J.value1;$.value2=J.value2;}else if(["DATE","FROM","TO"].indexOf(J.operation)!==-1){if(typeof J.value1==="string"){J.value1=J.value1===""?null:(new U(J.value1)).oDate;}$.value1=J.value1;}else if(["LASTDAYS","LASTWEEKS","LASTMONTHS","LASTQUARTERS","LASTYEARS","NEXTDAYS","NEXTWEEKS","NEXTMONTHS","NEXTQUARTERS","NEXTYEARS"].indexOf(J.operation)>-1){$.value1=J.value1;}else if(J.operation==="SPECIFICMONTH"){$.value1=J.value1+"";}else if(J.operation==="TODAYFROMTO"){$.value1=J.value1;$.value2=J.value2;}else{M=this.getOperation(J.operation);X=M&&M._getInitialValues?M._getInitialValues(J):null;if(!X){X=this._getValuesFromCurrentOperation(J);}if(!X){X=this.getDefaultValues(M);}$.value1=X[0];$.value2=X[1];}this.bIgnoreBindingChange=true;this.oModel.resume();delete this.bIgnoreBindingChange;this.serialize(true,false);this._setDDROperation.call(this,J);};z.prototype._getValuesFromCurrentOperation=function(i){var n=[];if(Number.isInteger(i.value1)){n.push(i.value1);}if(Number.isInteger(i.value2)){n.push(i.value2);}if(n.length>0){return n;}return null;};z.prototype.serialize=function(i,F){var J={},n=this.getCondition();if(!n.operation){return null;}var O=this.getOperation(n.operation);if(!O||!("value1"in O)){n.value1=null;}if(!O||!("value2"in O)){n.value2=null;}n.calendarType=(new U()).getCalendarType();J.conditionTypeInfo={name:this.getName(),data:n};if(this.iChangeTimer){clearTimeout(this.iChangeTimer);delete this.iChangeTimer;}if(i){this._updateProvider(J,true,F);}else{this.iChangeTimer=setTimeout(this._updateProvider.bind(this,J,false,F),0);}return J;};z.prototype._updateProvider=function(J,s,F){J.ranges=this.getFilterRanges();J.items=[];var i=false;var n=0;var E=0;var G=0;var H=this.oModel.getData(),K=H.currentoperation;if(K.languageText){var M=K.languageText;if(this._isIntIntInterval(K)){if(J.conditionTypeInfo.data.value1!=null&&J.conditionTypeInfo.data.value1!==""&&J.conditionTypeInfo.data.value2!=null&&J.conditionTypeInfo.data.value2!==""){M=this._formatIntIntInterval(K,J);}this.oModel.setProperty("inputstate","NONE",this.getContext());if(!this._isValidFromToPeriod(J.conditionTypeInfo.data.value1,J.conditionTypeInfo.data.value2)){this.oModel.setProperty("inputstate","ERROR",this.getContext());}}else if(this._isIntInterval(K)){if(J.conditionTypeInfo.data.value1!==null&&J.conditionTypeInfo.data.value1!==""){M=this._formatIntInterval(K,J);this.oModel.setProperty("inputstate","NONE",this.getContext());}else if(this._bSuggestItemSelected){M=this._fillNumberToText(K.basicLanguageText);var O=K.basicLanguageText.indexOf("{0}");n=O+1;E=O;G=O+1;i=true;}else{M="";this.oModel.setProperty("inputstate","NONE",this.getContext());}}else if(this._isFixedRange(K)){M=this._formatFixedRange(K,K.textValue);this.oModel.setProperty("inputstate","NONE",this.getContext());}else{if(J.conditionTypeInfo.data.value1!==null&&J.conditionTypeInfo.data.value1!==""){var Q=this._calculateDateRangeValueText(K,J);var W=Q.value;i=Q.bSetCursor;if(W){M=this._formatFixedRange(K,W);n=M.length-1;this.oModel.setProperty("inputstate","NONE",this.getContext());}else{M="";}}else{M="";}}this._bSuggestItemSelected=false;this.oModel.setProperty("/formattedText",M);if(i&&!(this._oPopup&&this._oPopup.isOpen())&&this._oInput){this._oInput.$("inner").cursorPos(n);if(E<G){this._oInput.selectText(E,G);}this._oInput._lastValue="";}}if(this.oFilterProvider){this.oFilterProvider.oModel.setProperty("/"+this.sFieldName,J);this.oFilterProvider.setFilterData({},false,this.sFieldName);if(F&&this.oFilterProvider._oSmartFilter){this.oFilterProvider._oSmartFilter.fireFilterChange();}}};z.prototype.getFilterRanges=function(){var i=this.getCondition(),n=[],s;if(i.operation==="LASTDAYS"){if(!isNaN(i.value1)){n=o.ranges.lastDays(i.value1);}i.value1=n[0];i.value2=n[1];}else if(i.operation==="LASTWEEKS"){if(!isNaN(i.value1)){n=o.ranges.lastWeeks(i.value1);}i.value1=n[0];i.value2=n[1];}else if(i.operation==="LASTMONTHS"){if(!isNaN(i.value1)){n=o.ranges.lastMonths(i.value1);}i.value1=n[0];i.value2=n[1];}else if(i.operation==="LASTQUARTERS"){if(!isNaN(i.value1)){n=o.ranges.lastQuarters(i.value1);}i.value1=n[0];i.value2=n[1];}else if(i.operation==="LASTYEARS"){if(!isNaN(i.value1)){n=o.ranges.lastYears(i.value1);}i.value1=n[0];i.value2=n[1];}else if(i.operation==="NEXTDAYS"){if(!isNaN(i.value1)){n=o.ranges.nextDays(i.value1);}i.value1=n[0];i.value2=n[1];}else if(i.operation==="NEXTWEEKS"){if(!isNaN(i.value1)){n=o.ranges.nextWeeks(i.value1);}i.value1=n[0];i.value2=n[1];}else if(i.operation==="NEXTMONTHS"){if(!isNaN(i.value1)){n=o.ranges.nextMonths(i.value1);}i.value1=n[0];i.value2=n[1];}else if(i.operation==="NEXTQUARTERS"){if(!isNaN(i.value1)){n=o.ranges.nextQuarters(i.value1);}i.value1=n[0];i.value2=n[1];}else if(i.operation==="NEXTYEARS"){if(!isNaN(i.value1)){n=o.ranges.nextYears(i.value1);}i.value1=n[0];i.value2=n[1];}else if(i.operation==="SPECIFICMONTH"){var E=parseInt(i.value1),F=new U();if(Number.isFinite(E)){F.setMonth(E);F=o.getMonthStartDate(F);n=o.getRange(0,"MONTH",F);i.value1=n[0];i.value2=n[1];}}else if(i.operation==="TODAYFROMTO"){if(!isNaN(parseInt(i.value1))){i.value1=this._getTodayFromToValueFrom(i.value1);}if(!isNaN(parseInt(i.value2))){i.value2=this._getTodayFromToValueTo(i.value2);}}else{var O=this.getOperation(i.operation);if(O&&O.getDateRange){s=O.getDateRange(i);if(!s){return[];}i.value1=s&&s.value1?s.value1:null;i.value2=s&&s.value2?s.value2:null;}}if(i.value1 instanceof U){i.value1=i.value1.oDate;}if(i.value2 instanceof U){i.value2=i.value2.oDate;}if(i.operation==="DATE"){if(!(this.isValidCondition()&&i.value1)){return[];}i.operation="BT";i.value2=i.value1;i.value1=z.setStartTime(i.value1).oDate;i.value2=z.setEndTime(i.value2,this._bIgnoreTime,this._Precision).oDate;}else if(i.operation==="FROM"){if(!(this.isValidCondition()&&i.value1)){return[];}i.operation="GE";delete i.value2;}else if(i.operation==="TO"){if(!(this.isValidCondition()&&i.value1)){return[];}i.operation="LE";delete i.value2;i.value1=z.setEndTime(i.value1,this._bIgnoreTime).oDate;}else{if(s){i.operation=s.operation;i.value1=i.value1?z.setStartTime(i.value1).oDate:null;i.value2=i.value2?z.setEndTime(i.value2,this._bIgnoreTime).oDate:null;}else{if(!(this.isValidCondition()&&i.value1&&i.value2)){return[];}i.operation="BT";i.value1=z.setStartTime(i.value1).oDate;i.value2=z.setEndTime(i.value2,this._bIgnoreTime).oDate;}}i.exclude=false;i.keyField=i.key;delete i.key;return[i];};z.prototype.getTokenText=function(){return"";};z.prototype.getName=function(){return this.getMetadata().getName();};z.prototype.getType=function(){return"Edm.Date";};z.prototype._bindValueState=function(i){i.bindProperty("valueState",{path:"$smartEntityFilter>inputstate",formatter:function(){if(this.getBinding("valueState").getValue()==="ERROR"){return V.Error;}else{return V.None;}}});};z.prototype.initializeFilterItem=function(){if(this._isNewDynamicDateRangeEnabled()){return this._initializeFilterItemNew.apply(this,arguments);}return this._initializeFilterItemOld.apply(this,arguments);};z.prototype._initializeFilterItemOld=function(){this._oInput=new I(T._createStableId(this),{value:"{$smartEntityFilter>formattedText}",showValueHelp:true,showSuggestion:true,maxSuggestionWidth:"auto",valueHelpRequest:this._toggleOpen.bind(this)});this._oInput._highlightListText=function(){var i,n,s=this._oList.$().find('.sapMDLILabel, .sapMSLITitleOnly');for(i=0;i<s.length;i++){n=s[i];n.innerHTML=this._createHighlightedText(n);}};this._bindValueState(this._oInput);this._oInput.bindAggregation("suggestionItems",{path:"$smartEntityFilter>operations",sorter:new m("order",false,false),filters:new j("order",function(i){return i!==undefined&&i>-1;}),template:new L({key:{path:"$smartEntityFilter>key"}}),templateShareable:false});this._oInput.setFilterFunction(function(s,i){if(this._oPopup&&this._oPopup.isOpen()){return false;}var O=this.getOperation(i.getKey());s=s.trim();if(s==="?"){z._DefaultFilterSuggestItem.call(O,s,i,this);return O.category!=="DYNAMIC.DATERANGE"&&O.category!=="DYNAMIC.DATE";}if(O.filterSuggestItem){return O.filterSuggestItem(s,i,this);}else{return z._DefaultFilterSuggestItem.call(O,s,i,this);}}.bind(this));this._oInput.attachSuggestionItemSelected(function(E){var i=E.getParameter("selectedItem");if(!i){return;}var O=i.getKey();var n=this.getOperation(O);var s=E.oSource.getValue().trim();if(n.onItemSelected){n.onItemSelected(s,i,this);return;}else{z._DefaultOnItemSelected.call(n,s,i,this);}}.bind(this));this._oInput.attachChange(function(E){var s=E.getParameter("value");if(s){var O=this.getOperations();var H=O.some(function(i){if(i.onChange){return i.onChange(s,this);}else{return z._defaultOnChangeHandler.call(i,s,this);}},this);if(!H){this.oModel.setProperty("inputstate","ERROR",this.getContext());}}else{this.setCondition({key:this.sFieldName,operation:"FROM",value1:null,value2:null});this.oModel.setProperty("inputstate","NONE",this.getContext());}}.bind(this));this._oInput.attachBrowserEvent("focusin",function(E){if(q(E.target).hasClass("sapMInputBaseInner")&&this._oPopup&&this._oPopup.isOpen()){this._oPopup.close();}}.bind(this));this._oInput.setBindingContext(this.getContext(),"$smartEntityFilter");this._oInput.setModel(this.getModel(),"$smartEntityFilter");this.bFireFilterChange=false;this.getModel().checkUpdate(true);this.bFireFilterChange=true;return this._oInput;};z.prototype._toggleOpen=function(E){if(!this._oPopup){if((!R||!y||(D.system.phone&&!B))&&!this._bPopoverRequested){R=sap.ui.require("sap/m/ResponsivePopover");y=sap.ui.require("sap/m/VBox");if(D.system.phone){B=sap.ui.require("sap/m/Button");if(!R||!y||!B){sap.ui.require(["sap/m/ResponsivePopover","sap/m/VBox","sap/m/Button"],_.bind(this));this._bPopoverRequested=true;}}else if(!R||!y){sap.ui.require(["sap/m/ResponsivePopover","sap/m/VBox"],_.bind(this));this._bPopoverRequested=true;}}if(!R||!y||(D.system.phone&&!B)){return;}this._oPopupLayout=new y();this._oPopupLayout.addStyleClass("sapUiCompDateRangeType");this._initializeFilterItemPopoverContent(this._oPopupLayout);this._oPopup=new R({showCloseButton:false,showArrow:true,showHeader:false,horizontalScrolling:false,placement:P.VerticalPreferedBottom,content:this._oPopupLayout,contentWidth:"18rem",afterClose:function(){if(A(this._oPopup)){this._oPopup.getModel("$smartEntityFilter").refresh(true);}if(this.oFilterProvider._oSmartFilter.getLiveMode()){var i=sap.ui.require("sap/ui/comp/smartfilterbar/SmartFilterBar");this.oFilterProvider._oSmartFilter.triggerSearch(i.LIVE_MODE_INTERVAL);}}.bind(this)});this._oPopup.addAriaLabelledBy(this._oOperationLabel);if(D.system.phone){this._oPopup.setBeginButton(new B({text:T.getTranslatedText("CONDITION_DATERANGETYPE_POPOVER_CLOSEBUTTON"),type:"Emphasized",press:function(E){this._oPopup.close();}.bind(this)}));}sap.ui.getCore().getMessageManager().registerObject(this._oPopup,true);this._oPopup.setModel(this.getModel(),"$smartEntityFilter");this._oPopup._oControl.oPopup.setAutoCloseAreas([this._oInput.getDomRef()]);}if(!this._oPopup.isOpen()){this._oPopup.openBy(this._oInput._getValueHelpIcon());}else{this._oPopup.close();}};function _(i,n,s){R=i;y=n;B=s;this._bPopoverRequested=false;if(!this._bIsBeingDestroyed){this._toggleOpen();}}function A(n){var i,s,H=false,E=n.getContent()[0].getItems();for(i=0;i<E.length;i++){s=E[i];if(s.getMetadata().getName()==="sap.m.DatePicker"&&s.getValueState()!==V.None){H=true;break;}}return H;}z.prototype.datePickerValidateLastValue=function(i){var s;if(!i.isValidValue()){s=i.getValue();i.resetProperty("value");i.setValue(s);if(i.isValidValue()){i.setValueState(i.isValidValue()?V.None:V.Error);}}};z.prototype._getDateFormatter=function(s){var F={style:this.oDateFormat.style,pattern:this.oDateFormat.pattern,strictParsing:s};if(JSON.stringify(F)!==this._sFormatSettings){this._sFormatSettings=JSON.stringify(F);this._oDateFormatter=e.getInstance(F);}return this._oDateFormatter;};z.prototype._fillNumberToText=function(s,n,i){var E="X",F="Y";if(n||n===0){E=String(n);}if(i||i===0){F=String(i);if(n<0){E="("+E+")";}if(i<0){F="("+F+")";}}s=s.replace("{0}",E);s=s.replace("{1}",F);return s;};z.prototype._setIntControlBinding=function(i,O,s){i.setFieldWidth("auto");i.bindProperty("description",{path:"$smartEntityFilter>"+s,type:"sap.ui.model.type.Integer",formatter:function(){var n=O.descriptionTextKeys[0];var E=O.descriptionTextKeys[1];if(this.getBinding("description").getValue()===1){return T.getTranslatedText(n);}else{return T.getTranslatedText(E||n);}}});};z.prototype._createIntFromToControl=function(i,s,n){return new I(T._createStableId(i,s),{value:{path:"$smartEntityFilter>"+n,type:new N({},{minimum:-i._maxIntValue,maximum:i._maxIntValue})},ariaLabelledBy:i._oOperationSelect||null,textAlign:"End",width:"100%"});};z.prototype._isValidFromToPeriod=function(i,n){if((!i&&i!==0)||isNaN(i)){return false;}if((!n&&n!==0)||isNaN(n)){return false;}if(i<-this._maxIntValue||i>this._maxIntValue){return false;}if(n<-this._maxIntValue||n>this._maxIntValue){return false;}if((i<0&&Math.abs(i)>Math.abs(n))||(i===0&&n<0)||(n<0&&Math.abs(n)>Math.abs(i))||(n===0&&i<0)||(i<0&&n<0)){return false;}return true;};z.prototype._getTodayFromToValueFrom=function(i){if(i<0){var n=o.getRange((-1*i),"DAY")[1];n.setHours(0,0,0);return n;}return o.getRange(-i,"DAY")[0];};z.prototype._getTodayFromToValueTo=function(i){if(i<0){var n=o.getRange(i,"DAY")[0];n.setHours(23,59,59);return n;}return o.getRange(i,"DAY")[1];};z.prototype.destroy=function(){if(this.iChangeTimer){clearTimeout(this.iChangeTimer);delete this.iChangeTimer;}if(this._oPopup){sap.ui.getCore().getMessageManager().unregisterObject(this._oPopup);this._oPopup.destroy();}T.prototype.destroy.apply(this,arguments);};z.prototype._initializeFilterItemNew=function(){this._createCustomDDOptions(this.getOperations());var F={style:this.oDateFormat.style,pattern:this.oDateFormat.pattern,strictParsing:false};this._oInput=new p(T._createStableId(this),{name:this.sFieldName,formatter:t.getInstance({date:F}),options:{path:"$smartEntityFilter>/operations",formatter:function(O){return O.map(function(i){if(x.includes(i.key)){return i.key;}return this._getCustomDDOptionName(i.key);}.bind(this));}.bind(this)},value:this._getDefaultValueDDR(),change:this._onDDRChange.bind(this)});this._bindValueState(this._oInput);this._oInput._reApplyFocusToElement=this._reApplyFocusToElement.bind(this._oInput,this);this._oInput.setBindingContext(this.getContext(),"$smartEntityFilter");this._oInput.setModel(this.getModel(),"$smartEntityFilter");this.bFireFilterChange=false;this.getModel().checkUpdate(true);this.bFireFilterChange=true;return this._oInput;};z.prototype.updateOperations=function(){var O=this.getOperations();for(var i=0;i<O.length;i++){this._updateOperation(O[i]);}if(this._isNewDynamicDateRangeEnabled()){this._createCustomDDOptions(O);}return this.oModel.setProperty("operations",O,this.getContext(),true);};z.prototype.setCondition=function(i){T.prototype.setCondition.apply(this,arguments);this._setDDROperation.call(this,i);return this;};z.prototype._onDDRChange=function(E){var O,i,n=E.getParameter("value"),s=E.getParameter("valid");if(s&&n){var F=this._getOptionName(n.operator);O=this.getOperation(F);i=this._prepareDDRValues(O,n,F);this.oModel.setProperty("/currentoperation",O);this.oModel.setProperty("/condition/operation",F);this.oModel.setProperty("/condition/value1",i[0]);this.oModel.setProperty("/condition/value2",i[1]);}else if(s){O=this.getOperation("DATERANGE");this.oModel.setProperty("/currentoperation",O);this.oModel.setProperty("/condition/operation","DATERANGE");this.oModel.setProperty("/condition/value1",null);this.oModel.setProperty("/condition/value2",null);}this.oModel.setProperty("inputstate",s?"NONE":"ERROR",this.getContext());};z.prototype._reApplyFocusToElement=function(i,n,s){var E,O=this._oNavContainer.getPages()[0],F=i.getDefaultOperation()||z.Operations["DATERANGE"];if(n!==O||s){return;}var G=this._oOptionsList.getItems().find(function(H){if(!H.isA("sap.m.DynamicDateRangeListItem")){return false;}var J=H.getOptionKey();if(J==="DATERANGE"){E=H;}return J===F.key;});if(!G){G=E||q(n.getDomRef().querySelector("section")).firstFocusableDomRef();}G.focus();};z.prototype._getDefaultValueDDR=function(){var i=this.getDefaultOperation(),O=i&&i.key;if(!this._getDDROption(O)){return null;}var n=typeof i.defaultValues==="function"?i.defaultValues():i.defaultValues;if(!x.includes(O)){O=this._getCustomDDOptionName(O);}if(Array.isArray(n)&&n.length>0&&n[0]!==null){return{operator:O,values:n};}return null;};z.prototype._getDDROption=function(n){if(x.includes(n)){return r.getOption(n);}return r.getOption(this._getCustomDDOptionName(n));};z.prototype._getCustomDDOptionName=function(n){return this.sFieldName+"__custom__"+n;};z.prototype._getOptionName=function(n){var i=n.split("__custom__");if(i.length>1){return i[1];}return i[0];};z.prototype._createCustomDDOptions=function(O){O.forEach(this._createCustomDDOption,this);};z.prototype._createCustomDDOption=function(i){if(x.includes(i.key)){return;}var n;var s=typeof i.category==="object"?i.category.key:i.category;if(s.toLowerCase().startsWith("fixed")||i.type==="range"){n=this._createCustomFixedDDOption(i);}else{n=this._createCustomDynamicDDOption(i);}n.getGroupHeader=function(){if(typeof i.category==="object"){var E=i.category.bundle;var F=i.category.key;if(sap.ui.getCore().getLibraryResourceBundle(E).hasText(F)){return sap.ui.getCore().getLibraryResourceBundle(E).getText(F);}}if(sap.ui.getCore().getLibraryResourceBundle("sap.ui.comp").hasText(i.category)){return sap.ui.getCore().getLibraryResourceBundle("sap.ui.comp").getText(i.category);}if(sap.ui.getCore().getLibraryResourceBundle("sap.m").hasText(i.category)){return sap.ui.getCore().getLibraryResourceBundle("sap.m").getText(i.category);}return sap.ui.getCore().getLibraryResourceBundle("sap.m").getText("DDR_OPTIONS_GROUP_0");};n.getGroup=function(){return i.order;};r.addOption(n);};z.prototype._createCustomFixedDDOption=function(i){var n=this;var s=new C({key:this._getCustomDDOptionName(i.key),getText:function(){return i.languageText||T.getTranslatedText(i.textKey);},getValueHelpUITypes:function(){return[];},enhanceFormattedValue:function(){if(!n.getOperation(n._getOptionName(i.key))){return false;}var E=typeof i.category==="object"?i.category.key:i.category;if(E.toUpperCase().startsWith('FIXED.')&&i.type==="int"){return false;}return true;},format:this._customDDOptionFormatter.bind(this),toDates:function(){var E=i.defaultValues;if(typeof E==="function"){E=E();}return E;},parse:function(E){var F=i.basicLanguageText||i.languageText||T.getTranslatedText(i.textKey);if(E&&F&&F.toLowerCase().startsWith(E.toLowerCase())){return{operator:this.getKey(),values:this.toDates()};}return null;}});return s;};z.prototype._createCustomDynamicDDOption=function(n){var s=this;var E=new sap.m.CustomDynamicDateOption({key:this._getCustomDDOptionName(n.key),getText:function(){var i=(n.languageText||T.getTranslatedText(n.textKey));if(i.indexOf("{0}")>=0){return s._fillNumberToText(i);}return i;},getValueHelpUITypes:function(){if(n.type==="int"){return[new u({type:"int"})];}else if(n.type==="[int,int]"){return[new u({type:"int"}),new u({type:"int"})];}},createValueHelpUI:function(i,F){i.aControlsByParameters={};i.aControlsByParameters[this.getKey()]=[];s.setControls([]);var G=s.getControls(n),H=n.defaultValues.length,J=n.defaultValues;if(typeof J==="function"){J=J();}G.forEach(function(K){if(!K.getValue()&&J&&J[0]){if(typeof J==="function"){J=J();}K.setValue(J[0]);J.shift();s.oModel.setProperty("/condition/value"+(H-J.length),K.getValue());}if(typeof F==="function"){K.attachChange(function(){F(this);},this);}i.aControlsByParameters[this.getKey()].push(K);},this);s.setControls(G);return G;},format:this._customDDOptionFormatter.bind(this),toDates:function(i){var F=s.oModel.getProperty("",s.oConditionContext),O=F.operation,G=F.value1,H=F.value2;F.operation=s._getOptionName(i.operator);F.value1=!isNaN(i.values[0])?parseInt(i.values[0]):i.values[0];F.value2=!isNaN(i.values[1])?parseInt(i.values[1]):i.values[1];var J=s.getFilterRanges();F.operation=O;F.value1=G;F.value2=H;if(J.length===0){return[];}return[J[0].value1,J[0].value2];},parse:function(i){var F=new L({key:n.key}),M=n.filterSuggestItem.call(n,i,F,s);if(M){return{operator:this.getKey(),values:[F._value1,F._value2||null]};}return null;},validateValueHelpUI:function(F){var G=function(K){var M=K.getValue(),O=this._maxIntValue,Q=-this._maxIntValue;if((!M&&M!==0)||isNaN(M)){return false;}if(J&&J.getBindingInfo('value')&&J.getBindingInfo('value').type&&J.getBindingInfo('value').type.oConstraints){if(J.getBindingInfo('value').type.oConstraints.hasOwnProperty("minimum")){Q=J.getBindingInfo('value').type.oConstraints.minimum;}if(J.getBindingInfo('value').type.oConstraints.hasOwnProperty("maximum")){O=J.getBindingInfo('value').type.oConstraints.maximum;}}if(M<Q||M>O){return false;}return true;};var H=this.getValueHelpUITypes();for(var i=0;i<H.length;i++){var J=F.aControlsByParameters[this.getKey()][i];switch(H[i].getType()){case"int":return G.call(s,J);case"month":case"date":case"daterange":if(!J.getSelectedDates()||J.getSelectedDates().length==0){return false;}break;case"options":if(J.getSelectedIndex()<0){return false;}break;}}return true;}});return E;};z.prototype._customDDOptionFormatter=function(i){var O=this._getOptionName(i.operator),n=this.getOperation(O);if(!n){this.oModel.setProperty("/condition/value1",null);this.oModel.setProperty("/condition/value2",null);return"";}var s=this._prepareDDRValues(n,i,O);var J={conditionTypeInfo:{data:{value1:s[0],value2:s[1]}}};if(n.languageText){var F=n.languageText;if(this._isIntIntInterval(n)){if(J.conditionTypeInfo.data.value1!=null&&J.conditionTypeInfo.data.value1!==""&&J.conditionTypeInfo.data.value2!=null&&J.conditionTypeInfo.data.value2!==""){F=this._formatIntIntInterval(n,J);}}else if(this._isIntInterval(n)){if(J.conditionTypeInfo.data.value1!==null&&J.conditionTypeInfo.data.value1!==""){F=this._formatIntInterval(n,J);}else{F="";}}else if(this._isFixedRange(n)){F=this._formatFixedRange(n,n.textValue);}else{if(J.conditionTypeInfo.data.value1!==null&&J.conditionTypeInfo.data.value1!==""){var E=this._calculateDateRangeValueText(n,J);var G=E.value;if(G){F=this._formatFixedRange(n,G);}else{F="";}}else{F="";}}}return F;};z.prototype._isNewDynamicDateRangeEnabled=function(){if(!this.oFieldMetadata){return true;}return!this.oFieldMetadata.disableNewDateRangeControl;};z.prototype._isIntInterval=function(i){return i.basicLanguageText.indexOf("{0}")>=0;};z.prototype._formatIntInterval=function(i,J){if(J.conditionTypeInfo.data.value1===0&&i.zeroNumberTextKey){return i.zeroNumberLanguageText;}if(J.conditionTypeInfo.data.value1===1&&i.singulareBasicLanguageText){return i.singulareBasicLanguageText;}return this._fillNumberToText(i.basicLanguageText,J.conditionTypeInfo.data.value1);};z.prototype._isIntIntInterval=function(i){return i.basicLanguageText.indexOf("{0}")>=0&&i.basicLanguageText.indexOf("{1}")>=0;};z.prototype._formatIntIntInterval=function(i,J){return this._fillNumberToText(i.basicLanguageText,J.conditionTypeInfo.data.value1,J.conditionTypeInfo.data.value2);};z.prototype._isFixedRange=function(i){return i.textValue;};z.prototype._formatFixedRange=function(i,s){if(this._isNewDynamicDateRangeEnabled()){return i.languageText;}return i.languageText+" ("+s+")";};z.prototype._calculateDateRangeValueText=function(i,J){var n=J.conditionTypeInfo.data.value1;var s=J.conditionTypeInfo.data.value2;var E;var F=false;if((typeof n==="number"||typeof n==="string"&&!isNaN(parseInt(n)))&&i.valueList){E=i.valueList[n].text;}else if(n instanceof Date){var G=this._getDateFormatter(false);if(J.conditionTypeInfo.data.operation!=="DATERANGE"&&(n&&!s)){E=G.format(n);}else if(J.conditionTypeInfo.data.operation==="DATERANGE"&&n&&s){E=G.format(n)+" - "+G.format(s);}else if(J.conditionTypeInfo.data.operation==="DATERANGE"&&n&&!s&&!(this._oPopup&&this._oPopup.isOpen())){E=G.format(n)+" - ";F=true;}else{E="";}}else{E=J.conditionTypeInfo.data.value1;}return{value:E,bSetCursor:F};};z.prototype._convertUniversalDateToDate=function(i){return i.map(function(n){if(n.getJSDate){return n.getJSDate();}return n;});};z.prototype._prepareDDRValues=function(O,i,s){var n=typeof O.category==="object"?O.category.key:O.category;if(O.type==="int"&&!n.toUpperCase().startsWith('FIXED.')){return[parseInt(i.values[0]),null];}if(O.type==="[int,int]"){return[parseInt(i.values[0]),parseInt(i.values[1])];}var E=this._getDDROption(s).toDates(i);return this._convertUniversalDateToDate(E);};z.prototype._setDDROperation=function(i){if(this._isNewDynamicDateRangeEnabled()&&this._oInput&&i.key&&i.operation){var n=[];if(i.value1||i.value1===0){n[0]=i.value1;if(i.value2||i.value2===0){n[1]=i.value2;}}var O=this._getDDROption(i.operation),s=this.getOperation(i.operation),E=function(s,n){if(!s){return false;}if(s.hasOwnProperty("value1")&&!n[0]){return false;}if(s.hasOwnProperty("value2")&&!n[1]){return false;}return true;};if(E(s,n)){this._oInput.setValue({key:i.key,operator:O.getKey(),values:n});}else{this._oInput.setValue(null);this._oInput._oInput.setValue(null);}}};return z;});
